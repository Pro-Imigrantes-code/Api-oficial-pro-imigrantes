"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SigaaCourseStudent = void 0;

require("source-map-support/register");

var _url = require("url");

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/**
 * Course in the student's view.
 *
 * @category Internal
 **/
class SigaaCourseStudent {
  /**
   * @inheritdoc
   */

  /**
   * @inheritdoc
   */

  /**
   * @inheritdoc
   */

  /**
   * @inheritdoc
   */

  /**
   * @inheritdoc
   */

  /**
   * @inheritdoc
   */
  constructor(courseData, http, parser, resourcesManagerFactory, lessonParserFactory) {
    this.http = http;
    this.parser = parser;

    _defineProperty(this, "title", void 0);

    _defineProperty(this, "code", void 0);

    _defineProperty(this, "numberOfStudents", void 0);

    _defineProperty(this, "schedule", void 0);

    _defineProperty(this, "id", void 0);

    _defineProperty(this, "period", void 0);

    _defineProperty(this, "form", void 0);

    _defineProperty(this, "resources", void 0);

    _defineProperty(this, "lessonParser", void 0);

    _defineProperty(this, "currentPageCache", void 0);

    _defineProperty(this, "currentCoursePage", 'Principal');

    this.id = courseData.id;
    this.title = courseData.title;
    this.code = courseData.code;
    this.numberOfStudents = courseData.numberOfStudents;
    this.period = courseData.period;
    this.schedule = courseData.schedule;
    this.form = courseData.form;
    this.resources = resourcesManagerFactory.createCourseResourcesManager(this.http, this);
    this.lessonParser = lessonParserFactory.createLessonParser(this.resources);
  }
  /**
   *
   */


  /**
   * Request the course page using the course ID,
   * it is slower than requestCoursePageUsingForm,
   * but works if the form is invalid.
   * @returns Response page.
   */
  async requestCoursePageUsingId() {
    const page = await this.http.get('/sigaa/portais/discente/turmas.jsf');
    if (page.statusCode !== 200) throw new Error('SIGAA: Unexpected courses page status code.');
    const table = page.$('.listagem');

    if (table.length === 0) {
      throw new Error('SIGAA: Unexpected courses page format.');
    }

    const rows = table.find('tbody > tr').toArray();
    const foundCourse = rows.some(row => {
      const cellElements = page.$(row).find('td');
      if (cellElements.eq(0).hasClass('periodo')) return false;
      const buttonOnClick = cellElements.eq(5).find('a[onclick]').attr('onclick');
      if (!buttonOnClick) throw new Error('SIGAA: Unexpected row format at courses page.');
      const form = page.parseJSFCLJS(buttonOnClick);

      if (form.postValues.idTurma === this.form.postValues.idTurma) {
        this.form = form;
        return true;
      }
    });

    if (!foundCourse) {
      throw new Error('SIGAA: Not found course with id:' + this.id);
    }

    return this.requestCoursePageUsingForm();
  }
  /**
   * Request the course page using the course POST Form,
   * it is faster than requestCoursePageUsingId,
   * but don`t works if the form is invalid or expired.
   */


  async requestCoursePageUsingForm(useCache = true) {
    const page = await this.http.post(this.form.action.href, this.form.postValues, {
      shareSameRequest: true,
      noCache: !useCache
    });

    if (page.statusCode === 200) {
      if (page.bodyDecoded.includes('Comportamento Inesperado!')) {
        throw new Error('SIGAA: Unexpected behavior on the course page.');
      }

      return page;
    } else {
      throw new Error('SIGAA: Unexpected course page status code.');
    }
  }
  /**
   * Request the course page using requestCoursePageUsingForm,
   * fallback to requestCoursePageUsingId.
   * @returns Response page.
   */


  async requestCoursePage(useCache = true) {
    return this.requestCoursePageUsingForm(useCache).catch(() => this.requestCoursePageUsingId());
  }

  verifyIfCoursePageIsValid(page, buttonLabel) {
    if (page.statusCode !== 200) throw new Error('SIGAA: Invalid course page status code.');
    let pageCourseCode;

    if (buttonLabel === 'Ver Notas') {
      pageCourseCode = this.parser.removeTagsHtml(page.$('#relatorio h3').html()).split(' - ')[0];
    } else {
      pageCourseCode = this.parser.removeTagsHtml(page.$('#linkCodigoTurma').html()).replace(/ -$/, '');
    }

    if (pageCourseCode !== this.code) {
      throw new Error('SIGAA: Using the old page caused the change to the last accessed course instead of the requested course.');
    }
  }
  /**
   * Receive the name of the side tab and load the tab page
   * @param buttonLabel
   * @param retry
   */


  async getCourseSubMenu(buttonLabel, retry = true) {
    if (buttonLabel === this.currentCoursePage) {
      if (this.currentPageCache) return this.currentPageCache;
    }

    const page = await this.requestCoursePage(retry);
    const buttonElement = page.$('div.itemMenu').toArray().find(buttonEl => this.parser.removeTagsHtml(page.$(buttonEl).html()) === buttonLabel);

    if (!buttonElement) {
      throw new Error('SIGAA: Course sub menu button not found.');
    }

    const buttonOnClick = page.$(buttonElement).parent().attr('onclick');
    if (!buttonOnClick) throw new Error('SIGAA: Course sub menu button does not have the onclick event.');
    const form = page.parseJSFCLJS(buttonOnClick);

    try {
      const pageResponse = await this.http.post(form.action.href, form.postValues);
      this.verifyIfCoursePageIsValid(pageResponse, buttonLabel);

      if (pageResponse.bodyDecoded.includes('Menu Turma Virtual')) {
        this.currentPageCache = pageResponse;
      }

      this.currentCoursePage = buttonLabel;
      return pageResponse;
    } catch (err) {
      if (retry) {
        this.currentPageCache = undefined;
        this.currentCoursePage = 'Principal';
        return this.getCourseSubMenu(buttonLabel, false);
      }

      throw err;
    }
  }
  /**
   * Receive the name of the card on the right of the page and return it
   * @param page
   * @param cardTitle
   */


  async getRightSidebarCard(page, cardTitle) {
    const titleElement = page.$('.rich-stglpanel-header.headerBloco').toArray().find(titleElement => {
      return this.parser.removeTagsHtml(page.$(titleElement).html()) === cardTitle;
    });

    if (!titleElement) {
      throw new Error('SIGAA: Course sidebar card not found.');
    } else {
      return page.$(titleElement).parent().parent();
    }
  }

  static getLessonPageType(page) {
    if (page.$('#formAcoesTurma\\:visualizarAulasEmLista').length === 0 && page.$('#formAcoesTurma\\:visualizarPaginadas').length === 1) return 'list';
    if (page.$('#formAcoesTurma\\:visualizarAulasEmLista').length === 1 && page.$('#formAcoesTurma\\:visualizarPaginadas').length === 0) return 'paged';
    return 'unknown';
  }
  /**
   * @inheritdoc
   */


  async getLessons() {
    const pageLessonsOne = await this.getCourseSubMenu('Principal');
    let onclick;
    const pageLessonsOneType = SigaaCourseStudent.getLessonPageType(pageLessonsOne);

    if (pageLessonsOneType == 'list') {
      onclick = pageLessonsOne.$('#formAcoesTurma\\:linkExibirPaginados').attr('onclick');
    }

    if (pageLessonsOneType == 'paged') {
      onclick = pageLessonsOne.$('#formAcoesTurma\\:linkExibirEmLista').attr('onclick');
    }

    if (!onclick) throw new Error('SIGAA: Cannot find the lesson list toogle.');
    const form = pageLessonsOne.parseJSFCLJS(onclick);
    const pageLessonsTwo = await this.http.post(form.action.href, form.postValues);
    this.verifyIfCoursePageIsValid(pageLessonsTwo, 'Principal');
    const pageLessonsTwoType = SigaaCourseStudent.getLessonPageType(pageLessonsTwo);
    let pageLessonsPaged;
    let pageLessonsList;

    if (pageLessonsOneType == 'paged' && pageLessonsTwoType == 'list') {
      pageLessonsPaged = pageLessonsOne;
      pageLessonsList = pageLessonsTwo;
    } else if (pageLessonsOneType == 'list' && pageLessonsTwoType == 'paged') {
      pageLessonsPaged = pageLessonsTwo;
      pageLessonsList = pageLessonsOne;
    } else throw new Error('SIGAA: Lesson page types other than expected types.');

    this.lessonParser.parseLessonPages(pageLessonsList, pageLessonsPaged);
    return this.resources.lessons.instances;
  }
  /**
   * @inheritdoc
   */


  async getFiles() {
    const page = await this.getCourseSubMenu('Arquivos');
    const table = page.$('.listing');
    const usedFilesId = [];

    if (table.length !== 0) {
      const rows = table.find('tr[class]').toArray();

      for (const row of rows) {
        const cells = page.$(row).children();
        const title = this.parser.removeTagsHtml(cells.first().html());
        const description = this.parser.removeTagsHtml(cells.eq(1).html());
        const buttonElement = cells.eq(3).find('a[onclick]');
        const buttonOnclick = buttonElement.attr('onclick');
        if (!buttonOnclick) throw new Error('SIGAA: Button in the file table does not have the onclick event.');
        const form = page.parseJSFCLJS(buttonOnclick);
        const id = form.postValues['id'];
        const key = form.postValues['key'];
        const fileOptions = {
          title,
          description,
          id,
          key,
          instanceIndentifier: id
        };
        this.resources.files.upsert(fileOptions);
        usedFilesId.push(id);
      }
    }

    this.resources.files.keepOnly(usedFilesId);
    return this.resources.files.instances;
  }
  /**
   * @inheritdoc
   */


  async getForums() {
    const page = await this.getCourseSubMenu('FÃ³runs');
    const table = page.$('.listing');
    const usedForumIds = [];

    if (table.length !== 0) {
      let forumsIdIndex = 0;
      const rows = table.find('tr[class]').toArray();

      for (const row of rows) {
        const cells = page.$(row).children();
        const titleElement = cells.first().find('a');
        const title = this.parser.removeTagsHtml(titleElement.html());
        const forumType = this.parser.removeTagsHtml(cells.eq(1).html());
        const numOfTopics = parseInt(this.parser.removeTagsHtml(cells.eq(2).html()), 10);
        const author = this.parser.removeTagsHtml(cells.eq(3).html());
        const creationDate = this.parser.parseDates(this.parser.removeTagsHtml(cells.eq(4).html()), 1)[0];
        const titleOnClick = titleElement.attr('onclick');
        if (!titleOnClick) throw new Error('SIGAA: Forum title does not have onclick event.');
        const form = page.parseJSFCLJS(titleOnClick);
        const id = forumsIdIndex;
        forumsIdIndex++;
        const forumOptions = {
          title,
          id: id.toString(),
          instanceIndentifier: id.toString(),
          forumType,
          numOfTopics: numOfTopics,
          author,
          creationDate,
          form
        };
        this.resources.forums.upsert(forumOptions);
        usedForumIds.push(id.toString());
      }
    }

    this.resources.forums.keepOnly(usedForumIds);
    return this.resources.forums.instances;
  }
  /**
   * @inheritdoc
   */


  async getNews() {
    const page = await this.getCourseSubMenu('NotÃ­cias');
    const table = page.$('.listing');
    const usedNewsId = [];

    if (table.length !== 0) {
      const rows = table.find('tr[class]').toArray();

      for (const row of rows) {
        const cell = page.$(row).children();
        const title = this.parser.removeTagsHtml(cell.first().html());
        const buttonElement = cell.eq(2).children().first();
        const buttonOnClick = buttonElement.attr('onclick');
        if (!buttonOnClick) throw new Error('SIGAA: News onclick button does not have onclick event.');
        const form = page.parseJSFCLJS(buttonOnClick);
        const id = form.postValues.id;
        const newsOptions = {
          title,
          form,
          id,
          instanceIndentifier: id
        };
        this.resources.news.upsert(newsOptions);
        usedNewsId.push(id);
      }
    }

    this.resources.news.keepOnly(usedNewsId);
    return this.resources.news.instances;
  }
  /**
   * @inheritdoc
   */


  async getAbsence() {
    const page = await this.getCourseSubMenu('FrequÃªncia');
    const table = page.$('.listing');
    const absences = [];
    const rows = table.find('tr[class]').toArray();

    for (const row of rows) {
      const cells = page.$(row).children();
      const date = this.parser.removeTagsHtml(cells.first().html());
      const absenceString = this.parser.removeTagsHtml(cells.eq(1).html());
      let numOfAbsences;

      if (absenceString === '' || absenceString === 'NÃ£o Informada') {
        continue;
      } else if (absenceString === 'Presente') {
        numOfAbsences = 0;
      } else {
        numOfAbsences = parseInt(absenceString.replace(/\D/gm, ''), 10);
      }

      absences.push({
        date: this.parser.parseDates(date, 1)[0],
        numOfAbsences
      });
    }

    const details = this.parser.removeTagsHtml(page.$('.botoes-show').html()).split('\n');
    let totalAbsences, maxAbsences;

    for (const detail of details) {
      if (detail.includes('Total de Faltas')) {
        totalAbsences = parseInt(detail.replace(/\D/gm, ''), 10);
      } else if (detail.includes('MÃ¡ximo de Faltas Permitido')) {
        maxAbsences = parseInt(detail.replace(/\D/gm, ''), 10);
      }
    }

    if (typeof maxAbsences !== 'number' || typeof totalAbsences !== 'number') throw new Error('SIGAA: Invalid absence page format.');
    return {
      list: absences,
      totalAbsences,
      maxAbsences
    };
  }
  /**
   * Parse the side evaluation card and returns the name of each evaluation and the date if it has
   */


  async getExamCalendar() {
    const page = await this.requestCoursePage();
    const card = await this.getRightSidebarCard(page, 'AvaliaÃ§Ãµes');
    const examElements = card.find('li').toArray();
    const examList = [];
    const yearString = this.period.split('.')[0];

    for (const examElement of examElements) {
      const description = this.parser.removeTagsHtml(page.$(examElement).find('span.descricao').html());
      const dateHtml = page.$(examElement).find('span.data').html();
      const dateString = this.parser.removeTagsHtml(dateHtml);
      let date;

      try {
        date = this.parser.parseDates(dateString, 1, parseInt(yearString, 10))[0];
      } catch (err) {
        try {
          date = this.parser.parseDates(dateString, 2)[0]; // eslint-disable-next-line no-empty
        } catch (err) {}
      }

      examList.push({
        description,
        date
      });
    }

    return examList;
  }
  /**
   * @inheritdoc
   */


  async getQuizzes() {
    const page = await this.getCourseSubMenu('QuestionÃ¡rios');
    const table = page.$('.listing');
    const usedQuizzesIds = [];
    if (table.length === 0) return [];
    const rows = table.find('tr[class]').toArray();

    for (const row of rows) {
      const cells = page.$(row).find('td');
      const title = this.parser.removeTagsHtml(cells.first().html());
      const startDate = this.parser.parseDates(this.parser.removeTagsHtml(cells.eq(1).html()), 1)[0];
      const endDate = this.parser.parseDates(this.parser.removeTagsHtml(cells.eq(2).html()), 1)[0];
      const buttonSendAnswersElement = cells.eq(3).find('a[onclick]');
      let formSendAnswers;

      if (buttonSendAnswersElement.length > 0) {
        const buttonOnclick = buttonSendAnswersElement.attr('onclick');
        if (!buttonOnclick) throw new Error('SIGAA: quiz button onclick does not have onclick event.');
        formSendAnswers = page.parseJSFCLJS(buttonOnclick);
      }

      const buttonViewAnswersSubmittedElement = cells.eq(4).find('a[onclick]');
      let formViewAnswersSubmitted;

      if (buttonViewAnswersSubmittedElement.length > 0) {
        const buttonOnclick = buttonViewAnswersSubmittedElement.attr('onclick');
        if (!buttonOnclick) throw new Error('SIGAA: quiz button onclick does not have onclick event.');
        formViewAnswersSubmitted = page.parseJSFCLJS(buttonOnclick);
      }

      const form = formSendAnswers || formViewAnswersSubmitted;
      let id;

      if (!form) {
        if (!this.resources.lessons.instances.length) {
          await this.getLessons();
        }

        const quiz = this.resources.quizzes.instances.find(quiz => quiz.title === title);

        if (quiz) {
          id = quiz.id;
        } else {
          throw new Error('SIGAA: Not found quiz by title.');
        }
      } else {
        id = form.postValues.id;
      }

      const quizOptions = {
        title,
        startDate,
        endDate,
        id,
        instanceIndentifier: id,
        formSendAnswers,
        formViewAnswersSubmitted
      };
      this.resources.quizzes.upsert(quizOptions);
      usedQuizzesIds.push(id);
    }

    this.resources.quizzes.keepOnly(usedQuizzesIds);
    return this.resources.quizzes.instances;
  }
  /**
   * @inheritdoc
   */


  async getWebContents() {
    const page = await this.getCourseSubMenu('ConteÃºdo/PÃ¡gina web');
    const table = page.$('.listing');
    const usedWebContentsIds = [];

    if (table.length !== 0) {
      const rows = table.find('tr[class]').toArray();

      for (const row of rows) {
        const cells = page.$(row).find('td');
        const title = this.parser.removeTagsHtml(cells.first().html());
        const dateString = this.parser.removeTagsHtml(cells.eq(1).html());
        const date = this.parser.parseDates(dateString, 1)[0];
        const buttonOnclick = page.$(cells[2]).find('a[onclick]').attr('onclick');
        if (!buttonOnclick) throw new Error('SIGAA: Webcontent has button without onclick event.');
        const form = page.parseJSFCLJS(buttonOnclick);
        const id = form.postValues.id;
        const webContentOptions = {
          title,
          date,
          form,
          id,
          instanceIndentifier: id
        };
        this.resources.webContents.upsert(webContentOptions);
        usedWebContentsIds.push(id);
      }
    }

    this.resources.webContents.keepOnly(usedWebContentsIds);
    return this.resources.webContents.instances;
  }
  /**
   * @inheritdoc
   */


  async getSurveys() {
    // TODO
    throw new Error('SIGAA: getSurveys not implemented.');
  }
  /**
   * @inheritdoc
   */


  async getHomeworks() {
    const page = await this.getCourseSubMenu('Tarefas');
    const tables = page.$('.listing').toArray();
    if (!tables) return [];
    const usedHomeworksIds = [];

    for (const table of tables) {
      //If table title is 'Tarefas Em Grupo'
      const isGroupHomework = this.parser.removeTagsHtml(page.$(table).siblings('legend').html()) === 'Tarefas Em Grupo';
      const rows = page.$(table).find('tr[class]').toArray();

      for (let i = 0; i < rows.length; i += 2) {
        const cells = page.$(rows[i]).find('td');
        const cellDescription = page.$(rows[i + 1]).find('td');
        const title = this.parser.removeTagsHtml(cells.eq(1).html());
        const description = this.parser.removeTagsHtml(cellDescription.html());
        const date = this.parser.removeTagsHtml(cells.eq(2).html());
        const dates = this.parser.parseDates(date, 2);
        const haveGrade = this.parser.removeTagsHtml(cells.eq(3).html()) !== 'NÃ£o';
        const buttonSendHomeworkElement = page.$(cells.eq(5).find('a[onclick]'));
        let formSendHomework;

        if (buttonSendHomeworkElement.length !== 0) {
          const onClick = buttonSendHomeworkElement.attr('onclick');
          if (!onClick) throw new Error('SIGAA: Button send homework without onclick event.');
          formSendHomework = page.parseJSFCLJS(onClick);
        }

        const buttonViewHomeworkSubmittedElement = page.$(cells.eq(6).find('a[onclick]'));
        let formViewHomeworkSubmitted;

        if (buttonViewHomeworkSubmittedElement.length !== 0) {
          const onClick = buttonViewHomeworkSubmittedElement.attr('onclick');
          if (!onClick) throw new Error('SIGAA: Button view homework without onclick event.');
          formViewHomeworkSubmitted = page.parseJSFCLJS(onClick);
        }

        const form = formSendHomework || formViewHomeworkSubmitted;
        let id;
        let instanceIndentifier;

        if (!form) {
          if (!this.resources.lessons.instances.length) {
            await this.getLessons();
          }

          const homeworkList = this.resources.homework.instances.filter(homework => homework.title === title);

          if (homeworkList.length > 1) {
            throw new Error('SIGAA: There is more than one homework with same title and without id.');
          } else if (homeworkList.length == 1) {
            id = homeworkList[0]._instanceIndentifier;
          } else {
            instanceIndentifier = '_' + title;
          }
        } else {
          id = form.postValues.id;
        }

        if (id) {
          instanceIndentifier = id;
        }

        if (instanceIndentifier) {
          const homeworkOptions = {
            title,
            startDate: dates[0],
            endDate: dates[1],
            description,
            isGroupHomework,
            id,
            instanceIndentifier,
            formSendHomework,
            formViewHomeworkSubmitted,
            haveGrade
          };
          this.resources.homework.upsert(homeworkOptions);
          usedHomeworksIds.push(instanceIndentifier);
        }
      }
    }

    this.resources.homework.keepOnly(usedHomeworksIds);
    return this.resources.homework.instances;
  }
  /**
   * @inheritdoc
   */


  async getMembers() {
    const page = await this.getCourseSubMenu('Participantes');
    const tables = page.$('table.participantes').toArray();
    const tablesNames = page.$('fieldset').toArray();

    if (tables.length !== tablesNames.length) {
      throw new Error('SIGAA: Unexpected page members format.');
    }

    let tableTeacher;
    let tableStudent;
    tablesNames.forEach((value, index) => {
      const label = this.parser.removeTagsHtml(page.$(value).html());
      if (label.includes('Professores')) tableTeacher = tables[index];else if (label.includes('Alunos')) tableStudent = tables[index];
    });
    const teachers = [];

    if (tableTeacher) {
      const teacherElements = page.$(tableTeacher).find('tr').toArray();

      for (const teacherElement of teacherElements) {
        let department;
        let formation;
        let username;
        let email;
        const informationsString = page.$(teacherElement).find('td[valign]').html() || '';
        const informations = informationsString.split('<br>').slice(1, -1);

        for (const information of informations) {
          const label = this.parser.removeTagsHtml((information.match(/^[\s\S]*?(?=:[\s]*?<em>)/g) || [])[0]);
          const informationContent = this.parser.removeTagsHtml((information.match(/(?=<em>)[\s\S]*?(?=<\/em>)/g) || [])[0]);

          switch (label) {
            case 'Departamento':
              department = informationContent;
              break;

            case 'FormaÃ§Ã£o':
              formation = informationContent;
              break;

            case 'UsuÃ¡rio':
              username = informationContent;
              break;

            case 'E-mail':
            case 'E-Mail':
              email = informationContent;
              break;

            default:
              console.log('WARNING:Teacher information label not recognized:' + label);
          }
        }

        const name = this.parser.removeTagsHtml(page.$(teacherElement).find('strong > a').html());
        if (!username || !email) throw new Error('SIGAA: Invalid teacher format at member page.');
        const teacher = {
          name,
          username,
          department,
          formation,
          email
        };
        const photoHREF = page.$(teacherElement).find('img').attr('src');
        if (!photoHREF) throw new Error('SIGAA: teacher profile picture without src at member page.');
        const photoURL = new _url.URL(photoHREF, page.url.href);

        if (!photoURL.href.includes('no_picture.png')) {
          teacher.photoURL = photoURL;
        }

        teachers.push(teacher);
      }
    }

    const students = [];

    if (tableStudent) {
      const rows = page.$(tableStudent).find('tr').toArray();

      for (const row of rows) {
        const numberOfColumn = page.$(row).find('td[valign]').length;

        for (let column = 0; column < numberOfColumn; column++) {
          const informationsString = page.$(row).find('td[valign]').eq(column).html() || '';
          const informations = informationsString.split('<br>').slice(1);
          let registration;
          let username;
          let program;
          let registrationDate;
          let email;

          for (const information of informations) {
            const label = this.parser.removeTagsHtml((information.match(/^[\s\S]*?(?=:[\s]*?<em>)/g) || [])[0]);
            const informationContent = this.parser.removeTagsHtml((information.match(/(?=<em>)[\s\S]*?(?=<\/em>)/g) || [])[0]);

            switch (label) {
              case 'MatrÃ­cula':
                {
                  registration = informationContent;
                  break;
                }

              case 'UsuÃ¡rio':
                {
                  username = informationContent;
                  break;
                }

              case 'Curso':
                {
                  program = informationContent;
                  break;
                }

              case 'Data MatrÃ­cula':
                {
                  const informationDateSplited = informationContent.split('-');
                  const year = parseInt(informationDateSplited[2], 10);
                  const month = parseInt(informationDateSplited[1], 10) - 1;
                  const day = parseInt(informationDateSplited[0], 10);
                  registrationDate = new Date(year, month, day);
                  break;
                }

              case 'E-mail':
              case 'E-Mail':
                {
                  email = informationContent;
                  break;
                }

              default:
                {
                  console.log('WARNING:Student information label not recognized:' + label);
                }
            }
          }

          if (!username || !email || !registrationDate || !registration || !program) throw new Error('SIGAA: Invalid student format at member page.');
          const name = this.parser.removeTagsHtml(page.$(row).find('strong').eq(column).html());
          const student = {
            name,
            username,
            program,
            registration,
            registrationDate,
            email
          };
          const photoHREF = page.$(row).find('td[width="47"] img').eq(column).attr('src');
          if (!photoHREF) throw new Error('SIGAA: student profile picture without src at member page.');
          const photoURL = new _url.URL(photoHREF, page.url.href);

          if (!photoURL.href.includes('no_picture.png')) {
            student.photoURL = photoURL;
          }

          students.push(student);
        }
      }
    }

    return {
      teachers,
      students
    };
  }
  /**
   * @inheritdoc
   */


  async getGrades(retry = true) {
    try {
      const page = await this.getCourseSubMenu('Ver Notas', retry);

      const getPositionByCellColSpan = (ths, cell) => {
        let i = 0;

        for (const tr of ths.toArray()) {
          if (cell === tr) {
            return i;
          }

          i += parseInt(page.$(tr).attr('colspan') || '1', 10);
        }

        throw new Error('SIGAA: Invalid grade table.');
      };

      const removeCellsWithName = ['', 'MatrÃ­cula', 'Nome', 'Sit.', 'Faltas'];
      const table = page.$('table.tabelaRelatorio');
      if (table.length < 1) throw new Error('SIGAA: Received empty table on grade page.');
      const theadTrs = page.$('thead tr').toArray();
      const valueCells = page.$(table).find('tbody tr').children();

      if (valueCells.length === 0) {
        throw new Error('SIGAA: Page grades without grades.');
      }

      const grades = [];
      const theadElements = [];

      for (const theadTr of theadTrs) {
        theadElements.push(page.$(theadTr).find('th'));
      }

      for (let i = 0; i < theadElements[0].length; i++) {
        const gradeGroupName = this.parser.removeTagsHtml(theadElements[0].eq(i).html());
        if (removeCellsWithName.indexOf(gradeGroupName) !== -1) continue;
        const index = getPositionByCellColSpan(theadElements[0], theadElements[0][i]);
        const theadElementColspan = parseInt(theadElements[0].eq(i).attr('colspan') || '1', 10);
        let type;
        const gradeType = page.$(`#tipoUnid${i}`).val();

        switch (gradeType) {
          case 'P':
            type = 'weighted-average';
            break;

          case 'A':
            type = 'arithmetic-average';
            break;

          case 'S':
            type = 'sum-of-grades';
            break;

          default:
            type = 'only-average';
            break;
        }

        if (type === 'only-average' || theadElementColspan == 1) {
          const valueString = this.parser.removeTagsHtml(valueCells.eq(index).html()).replace(/,/g, '.');
          let value;

          if (valueString.length > 0) {
            value = parseFloat(valueString);
          }

          grades.push({
            name: gradeGroupName,
            value,
            type: 'only-average'
          });
        } else {
          const gradesSumOfGrades = [];
          const gradesWeighted = [];
          const gradesArithmetic = [];

          for (let j = index; j < index + theadElementColspan; j++) {
            const fullId = theadElements[1].eq(j).attr('id');
            if (!fullId) throw new Error('SIGAA: Grade without id.');
            const gradeId = fullId.slice(5);

            if (gradeId !== '') {
              const gradeName = page.$(`input#denAval_${gradeId}`).val();
              const gradeCode = page.$(`input#abrevAval_${gradeId}`).val();
              let value = parseFloat(this.parser.removeTagsHtml(valueCells.eq(j).html()).replace(/,/g, '.'));
              if (!value && value !== 0) value = undefined;

              if (type === 'sum-of-grades') {
                const maxValue = parseFloat(page.$(`input#notaAval_${gradeId}`).val());
                gradesSumOfGrades.push({
                  name: gradeName,
                  code: gradeCode,
                  maxValue: maxValue,
                  value
                });
              } else if (type === 'weighted-average') {
                const gradeWeight = parseFloat(page.$(`input#pesoAval_${gradeId}`).val());
                gradesWeighted.push({
                  name: gradeName,
                  code: gradeCode,
                  weight: gradeWeight,
                  value
                });
              } else if (type === 'arithmetic-average') {
                gradesArithmetic.push({
                  name: gradeName,
                  code: gradeCode,
                  value
                });
              }
            } else {
              let average = parseFloat(this.parser.removeTagsHtml(valueCells.eq(j).html()).replace(/,/g, '.'));
              if (isNaN(average)) average = undefined;

              if (gradesSumOfGrades.length > 0 && gradesWeighted.length > 0 && gradesArithmetic.length > 0) {
                throw new Error('SIGAA: Invalid grade type.');
              }

              if (type === 'sum-of-grades') {
                grades.push({
                  name: gradeGroupName,
                  value: average,
                  grades: gradesSumOfGrades,
                  type: 'sum-of-grades'
                });
              } else if (type === 'weighted-average') {
                grades.push({
                  name: gradeGroupName,
                  value: average,
                  grades: gradesWeighted,
                  type: 'weighted-average'
                });
              } else if (type === 'arithmetic-average') {
                grades.push({
                  name: gradeGroupName,
                  value: average,
                  grades: gradesArithmetic,
                  type: 'arithmetic-average'
                });
              }
            }
          }
        }
      }

      return grades;
    } catch (error) {
      if (retry) {
        return this.getGrades(false);
      } else {
        throw error;
      }
    }
  }
  /**
   * @inheritdoc
   */


  async getSyllabus() {
    const page = await this.getCourseSubMenu('Plano de Ensino');
    const tables = page.$('table.listagem').toArray();
    const response = {
      schedule: [],
      evaluations: [],
      basicReferences: [],
      supplementaryReferences: []
    };

    for (const table of tables) {
      const titleElement = page.$(table).find('caption');
      const title = this.parser.removeTagsHtml(titleElement.html());
      const rows = page.$(table).children('tbody').children('tr').toArray();

      switch (title) {
        case 'Metodologia de Ensino e AvaliaÃ§Ã£o':
          {
            for (const row of rows) {
              const rowBodyElement = page.$(row).children('td');
              const body = this.parser.removeTagsHtmlKeepingEmphasis(rowBodyElement.html());
              const rowFieldElement = page.$(row).children('th');
              const rowField = this.parser.removeTagsHtml(rowFieldElement.html());

              if (rowField === 'Metodologia:') {
                response.methods = body;
              } else if (rowField === 'Procedimentos de AvaliaÃ§Ã£o da Aprendizagem:') {
                response.assessmentProcedures = body;
              } else if (rowField === 'HorÃ¡rio de atendimento:') {
                response.attendanceSchedule = body;
              } else {
                throw new Error('SIGAA: Label not found.');
              }
            }

            break;
          }

        case 'Cronograma de Aulas':
          {
            const schedule = [];

            for (const row of rows) {
              const startDateElement = page.$(row).children('td').eq(0);
              const endDateElement = page.$(row).children('td').eq(1);
              const bodyElement = page.$(row).children('td').eq(2);
              const startDateString = this.parser.removeTagsHtml(startDateElement.html());
              let startDate;

              if (startDateString) {
                try {
                  const dates = this.parser.parseDates(startDateString, 1);
                  startDate = dates[0]; // eslint-disable-next-line no-empty
                } catch (err) {}
              }

              const endDateString = this.parser.removeTagsHtml(endDateElement.html());
              let endDate;

              if (endDateString) {
                try {
                  const dates = this.parser.parseDates(endDateString, 1);
                  endDate = dates[0]; // eslint-disable-next-line no-empty
                } catch (err) {}
              }

              const description = this.parser.removeTagsHtml(bodyElement.html());
              schedule.push({
                description,
                startDate,
                endDate
              });
            }

            response.schedule = schedule;
            break;
          }

        case 'AvaliaÃ§Ãµes':
          {
            const evaluations = [];

            for (const row of rows) {
              const dateElement = page.$(row).children('td').eq(0);
              const descriptionElement = page.$(row).children('td').eq(1);
              const dateString = this.parser.removeTagsHtml(dateElement.html());
              let date;

              if (dateString) {
                try {
                  const dates = this.parser.parseDates(dateString, 1);
                  date = dates[0]; // eslint-disable-next-line no-empty
                } catch (err) {}
              }

              const descriptionText = this.parser.removeTagsHtml(descriptionElement.html());
              evaluations.push({
                description: descriptionText,
                date
              });
            }

            response.evaluations = evaluations;
            break;
          }

        case 'ReferÃªncias BÃ¡sicas':
        case 'ReferÃªncias Complementares':
          {
            const references = [];

            for (const row of rows) {
              const referenceTypeElement = page.$(row).find('td').eq(0);
              const referenceType = this.parser.removeTagsHtml(referenceTypeElement.html());
              const descriptionElement = page.$(row).children('td').eq(1);
              const descriptionText = this.parser.removeTagsHtmlKeepingEmphasis(descriptionElement.html());
              references.push({
                description: descriptionText,
                type: referenceType
              });
            }

            if (title === 'ReferÃªncias BÃ¡sicas') {
              response.basicReferences = references;
            } else if (title === 'ReferÃªncias Complementares') {
              response.supplementaryReferences = references;
            }

            break;
          }

        default:
          console.log('WARNING:Education plan table title not recognized:' + title);
      }
    }

    return response;
  }

}

exports.SigaaCourseStudent = SigaaCourseStudent;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb3Vyc2VzL3NpZ2FhLWNvdXJzZS1zdHVkZW50LnRzIl0sIm5hbWVzIjpbIlNpZ2FhQ291cnNlU3R1ZGVudCIsImNvbnN0cnVjdG9yIiwiY291cnNlRGF0YSIsImh0dHAiLCJwYXJzZXIiLCJyZXNvdXJjZXNNYW5hZ2VyRmFjdG9yeSIsImxlc3NvblBhcnNlckZhY3RvcnkiLCJpZCIsInRpdGxlIiwiY29kZSIsIm51bWJlck9mU3R1ZGVudHMiLCJwZXJpb2QiLCJzY2hlZHVsZSIsImZvcm0iLCJyZXNvdXJjZXMiLCJjcmVhdGVDb3Vyc2VSZXNvdXJjZXNNYW5hZ2VyIiwibGVzc29uUGFyc2VyIiwiY3JlYXRlTGVzc29uUGFyc2VyIiwicmVxdWVzdENvdXJzZVBhZ2VVc2luZ0lkIiwicGFnZSIsImdldCIsInN0YXR1c0NvZGUiLCJFcnJvciIsInRhYmxlIiwiJCIsImxlbmd0aCIsInJvd3MiLCJmaW5kIiwidG9BcnJheSIsImZvdW5kQ291cnNlIiwic29tZSIsInJvdyIsImNlbGxFbGVtZW50cyIsImVxIiwiaGFzQ2xhc3MiLCJidXR0b25PbkNsaWNrIiwiYXR0ciIsInBhcnNlSlNGQ0xKUyIsInBvc3RWYWx1ZXMiLCJpZFR1cm1hIiwicmVxdWVzdENvdXJzZVBhZ2VVc2luZ0Zvcm0iLCJ1c2VDYWNoZSIsInBvc3QiLCJhY3Rpb24iLCJocmVmIiwic2hhcmVTYW1lUmVxdWVzdCIsIm5vQ2FjaGUiLCJib2R5RGVjb2RlZCIsImluY2x1ZGVzIiwicmVxdWVzdENvdXJzZVBhZ2UiLCJjYXRjaCIsInZlcmlmeUlmQ291cnNlUGFnZUlzVmFsaWQiLCJidXR0b25MYWJlbCIsInBhZ2VDb3Vyc2VDb2RlIiwicmVtb3ZlVGFnc0h0bWwiLCJodG1sIiwic3BsaXQiLCJyZXBsYWNlIiwiZ2V0Q291cnNlU3ViTWVudSIsInJldHJ5IiwiY3VycmVudENvdXJzZVBhZ2UiLCJjdXJyZW50UGFnZUNhY2hlIiwiYnV0dG9uRWxlbWVudCIsImJ1dHRvbkVsIiwicGFyZW50IiwicGFnZVJlc3BvbnNlIiwiZXJyIiwidW5kZWZpbmVkIiwiZ2V0UmlnaHRTaWRlYmFyQ2FyZCIsImNhcmRUaXRsZSIsInRpdGxlRWxlbWVudCIsImdldExlc3NvblBhZ2VUeXBlIiwiZ2V0TGVzc29ucyIsInBhZ2VMZXNzb25zT25lIiwib25jbGljayIsInBhZ2VMZXNzb25zT25lVHlwZSIsInBhZ2VMZXNzb25zVHdvIiwicGFnZUxlc3NvbnNUd29UeXBlIiwicGFnZUxlc3NvbnNQYWdlZCIsInBhZ2VMZXNzb25zTGlzdCIsInBhcnNlTGVzc29uUGFnZXMiLCJsZXNzb25zIiwiaW5zdGFuY2VzIiwiZ2V0RmlsZXMiLCJ1c2VkRmlsZXNJZCIsImNlbGxzIiwiY2hpbGRyZW4iLCJmaXJzdCIsImRlc2NyaXB0aW9uIiwiYnV0dG9uT25jbGljayIsImtleSIsImZpbGVPcHRpb25zIiwiaW5zdGFuY2VJbmRlbnRpZmllciIsImZpbGVzIiwidXBzZXJ0IiwicHVzaCIsImtlZXBPbmx5IiwiZ2V0Rm9ydW1zIiwidXNlZEZvcnVtSWRzIiwiZm9ydW1zSWRJbmRleCIsImZvcnVtVHlwZSIsIm51bU9mVG9waWNzIiwicGFyc2VJbnQiLCJhdXRob3IiLCJjcmVhdGlvbkRhdGUiLCJwYXJzZURhdGVzIiwidGl0bGVPbkNsaWNrIiwiZm9ydW1PcHRpb25zIiwidG9TdHJpbmciLCJmb3J1bXMiLCJnZXROZXdzIiwidXNlZE5ld3NJZCIsImNlbGwiLCJuZXdzT3B0aW9ucyIsIm5ld3MiLCJnZXRBYnNlbmNlIiwiYWJzZW5jZXMiLCJkYXRlIiwiYWJzZW5jZVN0cmluZyIsIm51bU9mQWJzZW5jZXMiLCJkZXRhaWxzIiwidG90YWxBYnNlbmNlcyIsIm1heEFic2VuY2VzIiwiZGV0YWlsIiwibGlzdCIsImdldEV4YW1DYWxlbmRhciIsImNhcmQiLCJleGFtRWxlbWVudHMiLCJleGFtTGlzdCIsInllYXJTdHJpbmciLCJleGFtRWxlbWVudCIsImRhdGVIdG1sIiwiZGF0ZVN0cmluZyIsImdldFF1aXp6ZXMiLCJ1c2VkUXVpenplc0lkcyIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJidXR0b25TZW5kQW5zd2Vyc0VsZW1lbnQiLCJmb3JtU2VuZEFuc3dlcnMiLCJidXR0b25WaWV3QW5zd2Vyc1N1Ym1pdHRlZEVsZW1lbnQiLCJmb3JtVmlld0Fuc3dlcnNTdWJtaXR0ZWQiLCJxdWl6IiwicXVpenplcyIsInF1aXpPcHRpb25zIiwiZ2V0V2ViQ29udGVudHMiLCJ1c2VkV2ViQ29udGVudHNJZHMiLCJ3ZWJDb250ZW50T3B0aW9ucyIsIndlYkNvbnRlbnRzIiwiZ2V0U3VydmV5cyIsImdldEhvbWV3b3JrcyIsInRhYmxlcyIsInVzZWRIb21ld29ya3NJZHMiLCJpc0dyb3VwSG9tZXdvcmsiLCJzaWJsaW5ncyIsImkiLCJjZWxsRGVzY3JpcHRpb24iLCJkYXRlcyIsImhhdmVHcmFkZSIsImJ1dHRvblNlbmRIb21ld29ya0VsZW1lbnQiLCJmb3JtU2VuZEhvbWV3b3JrIiwib25DbGljayIsImJ1dHRvblZpZXdIb21ld29ya1N1Ym1pdHRlZEVsZW1lbnQiLCJmb3JtVmlld0hvbWV3b3JrU3VibWl0dGVkIiwiaG9tZXdvcmtMaXN0IiwiaG9tZXdvcmsiLCJmaWx0ZXIiLCJfaW5zdGFuY2VJbmRlbnRpZmllciIsImhvbWV3b3JrT3B0aW9ucyIsImdldE1lbWJlcnMiLCJ0YWJsZXNOYW1lcyIsInRhYmxlVGVhY2hlciIsInRhYmxlU3R1ZGVudCIsImZvckVhY2giLCJ2YWx1ZSIsImluZGV4IiwibGFiZWwiLCJ0ZWFjaGVycyIsInRlYWNoZXJFbGVtZW50cyIsInRlYWNoZXJFbGVtZW50IiwiZGVwYXJ0bWVudCIsImZvcm1hdGlvbiIsInVzZXJuYW1lIiwiZW1haWwiLCJpbmZvcm1hdGlvbnNTdHJpbmciLCJpbmZvcm1hdGlvbnMiLCJzbGljZSIsImluZm9ybWF0aW9uIiwibWF0Y2giLCJpbmZvcm1hdGlvbkNvbnRlbnQiLCJjb25zb2xlIiwibG9nIiwibmFtZSIsInRlYWNoZXIiLCJwaG90b0hSRUYiLCJwaG90b1VSTCIsIlVSTCIsInVybCIsInN0dWRlbnRzIiwibnVtYmVyT2ZDb2x1bW4iLCJjb2x1bW4iLCJyZWdpc3RyYXRpb24iLCJwcm9ncmFtIiwicmVnaXN0cmF0aW9uRGF0ZSIsImluZm9ybWF0aW9uRGF0ZVNwbGl0ZWQiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJEYXRlIiwic3R1ZGVudCIsImdldEdyYWRlcyIsImdldFBvc2l0aW9uQnlDZWxsQ29sU3BhbiIsInRocyIsInRyIiwicmVtb3ZlQ2VsbHNXaXRoTmFtZSIsInRoZWFkVHJzIiwidmFsdWVDZWxscyIsImdyYWRlcyIsInRoZWFkRWxlbWVudHMiLCJ0aGVhZFRyIiwiZ3JhZGVHcm91cE5hbWUiLCJpbmRleE9mIiwidGhlYWRFbGVtZW50Q29sc3BhbiIsInR5cGUiLCJncmFkZVR5cGUiLCJ2YWwiLCJ2YWx1ZVN0cmluZyIsInBhcnNlRmxvYXQiLCJncmFkZXNTdW1PZkdyYWRlcyIsImdyYWRlc1dlaWdodGVkIiwiZ3JhZGVzQXJpdGhtZXRpYyIsImoiLCJmdWxsSWQiLCJncmFkZUlkIiwiZ3JhZGVOYW1lIiwiZ3JhZGVDb2RlIiwibWF4VmFsdWUiLCJncmFkZVdlaWdodCIsIndlaWdodCIsImF2ZXJhZ2UiLCJpc05hTiIsImVycm9yIiwiZ2V0U3lsbGFidXMiLCJyZXNwb25zZSIsImV2YWx1YXRpb25zIiwiYmFzaWNSZWZlcmVuY2VzIiwic3VwcGxlbWVudGFyeVJlZmVyZW5jZXMiLCJyb3dCb2R5RWxlbWVudCIsImJvZHkiLCJyZW1vdmVUYWdzSHRtbEtlZXBpbmdFbXBoYXNpcyIsInJvd0ZpZWxkRWxlbWVudCIsInJvd0ZpZWxkIiwibWV0aG9kcyIsImFzc2Vzc21lbnRQcm9jZWR1cmVzIiwiYXR0ZW5kYW5jZVNjaGVkdWxlIiwic3RhcnREYXRlRWxlbWVudCIsImVuZERhdGVFbGVtZW50IiwiYm9keUVsZW1lbnQiLCJzdGFydERhdGVTdHJpbmciLCJlbmREYXRlU3RyaW5nIiwiZGF0ZUVsZW1lbnQiLCJkZXNjcmlwdGlvbkVsZW1lbnQiLCJkZXNjcmlwdGlv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RUEsb0JBQU11TyxhQUFhLEdBQUcsS0FBS3BRLE1BQUwsQ0FBWWtELGNBQVosQ0FDcEJpTixvQkFBb0IsQ0FBQ2hOLElBQXJCLEVBRG9CLENBQXRCO0FBR0Esb0JBQU02TSxrQkFBa0IsR0FBR2pQLElBQUksQ0FBQ0ssQ0FBTCxDQUFPTyxHQUFQLEVBQVl1RCxRQUFaLENBQXFCLElBQXJCLEVBQTJCckQsRUFBM0IsQ0FBOEIsQ0FBOUIsQ0FBM0I7QUFFQSxvQkFBTW9PLGVBQWUsR0FBRyxLQUFLalEsTUFBTCxDQUFZb1AsNkJBQVosQ0FDdEJZLGtCQUFrQixDQUFDN00sSUFBbkIsRUFEc0IsQ0FBeEI7QUFHQStNLGNBQUFBLFVBQVUsQ0FBQ3ZLLElBQVgsQ0FBZ0I7QUFDZFAsZ0JBQUFBLFdBQVcsRUFBRTZLLGVBREM7QUFFZHZDLGdCQUFBQSxJQUFJLEVBQUUwQztBQUZRLGVBQWhCO0FBSUQ7O0FBQ0QsZ0JBQUloUSxLQUFLLEtBQUsscUJBQWQsRUFBcUM7QUFDbkMwTyxjQUFBQSxRQUFRLENBQUNFLGVBQVQsR0FBMkJrQixVQUEzQjtBQUNELGFBRkQsTUFFTyxJQUFJOVAsS0FBSyxLQUFLLDRCQUFkLEVBQTRDO0FBQ2pEME8sY0FBQUEsUUFBUSxDQUFDRyx1QkFBVCxHQUFtQ2lCLFVBQW5DO0FBQ0Q7O0FBRUQ7QUFDRDs7QUFDRDtBQUNFekUsVUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQ0UsdURBQXVEdEwsS0FEekQ7QUE3SEo7QUFpSUQ7O0FBQ0QsV0FBTzBPLFFBQVA7QUFDRDs7QUE3dUNzRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExlc3NvbiB9IGZyb20gJ0Bjb3Vyc2VSZXNvdXJjZXMvc2lnYWEtbGVzc29uLXN0dWRlbnQnO1xuaW1wb3J0IHsgTmV3c0RhdGEsIE5ld3MgfSBmcm9tICdAY291cnNlUmVzb3VyY2VzL3NpZ2FhLW5ld3Mtc3R1ZGVudCc7XG5pbXBvcnQgeyBQYXJzZXIgfSBmcm9tICdAaGVscGVycy9zaWdhYS1wYXJzZXInO1xuaW1wb3J0IHsgRmlsZSB9IGZyb20gJ0ByZXNvdXJjZXMvc2lnYWEtZmlsZSc7XG5pbXBvcnQgeyBIVFRQIH0gZnJvbSAnQHNlc3Npb24vc2lnYWEtaHR0cCc7XG5pbXBvcnQgeyBVUkwgfSBmcm9tICd1cmwnO1xuaW1wb3J0IHsgU2lnYWFGb3JtLCBQYWdlIH0gZnJvbSAnQHNlc3Npb24vc2lnYWEtcGFnZSc7XG5pbXBvcnQgeyBRdWl6RGF0YSwgUXVpeiB9IGZyb20gJ0BhdHRhY2htZW50cy9zaWdhYS1xdWl6LXN0dWRlbnQnO1xuaW1wb3J0IHsgSG9tZXdvcmtEYXRhLCBIb21ld29yayB9IGZyb20gJ0BhdHRhY2htZW50cy9zaWdhYS1ob21ld29yay1zdHVkZW50JztcbmltcG9ydCB7IFNpZ2FhU3VydmV5IH0gZnJvbSAnQGF0dGFjaG1lbnRzL3NpZ2FhLXN1cnZleS1zdHVkZW50JztcbmltcG9ydCB7IENvdXJzZVJlc291cmNlc01hbmFnZXJGYWN0b3J5IH0gZnJvbSAnLi9zaWdhYS1jb3Vyc2UtcmVzb3VyY2VzLW1hbmFnZXItZmFjdG9yeSc7XG5pbXBvcnQgeyBFeGFtIH0gZnJvbSAnQGNvdXJzZVJlc291cmNlcy9zaWdhYS1leGFtLXN0dWRlbnQnO1xuaW1wb3J0IHsgU3lsbGFidXMgfSBmcm9tICdAY291cnNlUmVzb3VyY2VzL3NpZ2FhLXN5bGxhYnVzLXN0dWRlbnQnO1xuaW1wb3J0IHsgTGVzc29uUGFyc2VyRmFjdG9yeSB9IGZyb20gJy4vc2lnYWEtbGVzc29uLXBhcnNlci1mYWN0b3J5JztcblxuaW1wb3J0IHtcbiAgR3JhZGVHcm91cCxcbiAgU3ViR3JhZGVBcml0aG1ldGljQXZlcmFnZSxcbiAgU3ViR3JhZGVTdW1PZkdyYWRlcyxcbiAgU3ViR3JhZGVXZWlnaHRlZEF2ZXJhZ2Vcbn0gZnJvbSAnQGNvdXJzZVJlc291cmNlcy9zaWdhYS1ncmFkZXMtc3R1ZGVudCc7XG5cbmltcG9ydCB7XG4gIEZvcnVtRGF0YSxcbiAgQ291cnNlRm9ydW1cbn0gZnJvbSAnQGNvdXJzZVJlc291cmNlcy9mb3J1bS9zaWdhYS1jb3Vyc2UtZm9ydW0tc3R1ZGVudCc7XG5cbmltcG9ydCB7XG4gIFdlYkNvbnRlbnQsXG4gIFdlYkNvbnRlbnREYXRhXG59IGZyb20gJ0BhdHRhY2htZW50cy9zaWdhYS13ZWItY29udGVudC1zdHVkZW50JztcbmltcG9ydCB7XG4gIEFic2VuY2VEYXksXG4gIEFic2VuY2VMaXN0XG59IGZyb20gJ0Bjb3Vyc2VSZXNvdXJjZXMvc2lnYWEtYWJzZW5jZS1saXN0LXN0dWRlbnQnO1xuXG5pbXBvcnQge1xuICBNZW1iZXJMaXN0LFxuICBTdHVkZW50LFxuICBUZWFjaGVyXG59IGZyb20gJ0Bjb3Vyc2VSZXNvdXJjZXMvc2lnYWEtbWVtYmVyLWxpc3Qtc3R1ZGVudCc7XG5cbi8qKlxuICogQGNhdGVnb3J5IEludGVybmFsXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ291cnNlU3R1ZGVudERhdGEge1xuICBpZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBjb2RlOiBzdHJpbmc7XG4gIG51bWJlck9mU3R1ZGVudHM6IG51bWJlcjtcbiAgcGVyaW9kOiBzdHJpbmc7XG4gIHNjaGVkdWxlOiBzdHJpbmc7XG4gIGZvcm06IFNpZ2FhRm9ybTtcbn1cblxuLyoqXG4gKiBDb3Vyc2UgaW4gdGhlIHN0dWRlbnQncyB2aWV3LlxuICogQGNhdGVnb3J5IFB1YmxpY1xuICoqL1xuZXhwb3J0IGludGVyZmFjZSBDb3Vyc2VTdHVkZW50IHtcbiAgLyoqXG4gICAqIFNpbmdsZSBzdHJpbmcgaW5kaWNhdGluZyB0aGUgY291cnNlLlxuICAgKlxuICAgKiBTdHJpbmcgw7puaWNhIGluZGljYW5kbyBvIGN1cnNvLlxuICAgKi9cbiAgcmVhZG9ubHkgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogQ291cnNlIHRpdGxlIChOb21lIGRhIHR1cm1hKS5cbiAgICovXG4gIHJlYWRvbmx5IHRpdGxlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIENvdXJzZSBuYW1lIGFiYnJldmlhdGlvbi5cbiAgICpcbiAgICogQ8OzZGlnbyAoYWJyZXZpYcOnw6NvKSBkYSB0dXJtYS5cbiAgICovXG4gIHJlYWRvbmx5IGNvZGU6IHN0cmluZztcblxuICAvKipcbiAgICogQ291cnNlIFNjaGVkdWxlLlxuICAgKlxuICAgKiBIb3LDoXJpbyBkYXMgYXVsYXMuXG4gICAqL1xuICByZWFkb25seSBzY2hlZHVsZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2Ygc3R1ZGVudHMsIGlzIDAgaWYgdGhlIGNvdXJzZSBvZiB0aGUgcGVyaW9kIGlzIG5vdCB0aGUgY3VycmVudCBvbmUuXG4gICAqL1xuICByZWFkb25seSBudW1iZXJPZlN0dWRlbnRzOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIENvdXJzZSBTZW1lc3Rlci5cbiAgICovXG4gIHJlYWRvbmx5IHBlcmlvZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIGxlc3NvbnMuXG4gICAqL1xuICBnZXRMZXNzb25zKCk6IFByb21pc2U8TGVzc29uW10+O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRvIHRoZSBsaXN0IG9mIGZpbGVzIHByb3ZpZGVkIGJ5IHRoZSB0ZWFjaGVyLlxuICAgKi9cbiAgZ2V0RmlsZXMoKTogUHJvbWlzZTxGaWxlW10+O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjb3Vyc2VzIGZvcnVtLlxuICAgKi9cbiAgZ2V0Rm9ydW1zKCk6IFByb21pc2U8Q291cnNlRm9ydW1bXT47XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNvdXJzZXMgbmV3cy5cbiAgICovXG4gIGdldE5ld3MoKTogUHJvbWlzZTxOZXdzW10+O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHlvdXIgYWJzZW5jZXMuXG4gICAqL1xuICBnZXRBYnNlbmNlKCk6IFByb21pc2U8QWJzZW5jZUxpc3Q+O1xuXG4gIC8qKlxuICAgKiBQYXJzZSB0aGUgc2lkZSBldmFsdWF0aW9uIGNhcmQgYW5kIHJldHVybnMgdGhlIG5hbWUgb2YgZWFjaCBldmFsdWF0aW9uIGFuZCB0aGUgZGF0ZSBpZiBpdCBoYXNcbiAgICovXG4gIGdldEV4YW1DYWxlbmRhcigpOiBQcm9taXNlPEV4YW1bXT47XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNvdXJzZXMgcXVpenplcy5cbiAgICovXG4gIGdldFF1aXp6ZXMoKTogUHJvbWlzZTxRdWl6W10+O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjb3Vyc2UgV2ViQ29udGVudCBBcnJheS5cbiAgICovXG4gIGdldFdlYkNvbnRlbnRzKCk6IFByb21pc2U8V2ViQ29udGVudFtdPjtcblxuICAvKipcbiAgICogVG8gZG9cbiAgICovXG4gIGdldFN1cnZleXMoKTogUHJvbWlzZTxTaWdhYVN1cnZleVtdPjtcblxuICAvKipcbiAgICogUmV0dXJucyB5b3VycyBob21ld29yay5cbiAgICovXG4gIGdldEhvbWV3b3JrcygpOiBQcm9taXNlPEhvbWV3b3JrW10+O1xuXG4gIC8qKlxuICAgKiBHZXQgbWVtYmVycyBvYmplY3QuXG4gICAqL1xuICBnZXRNZW1iZXJzKCk6IFByb21pc2U8TWVtYmVyTGlzdD47XG5cbiAgLyoqXG4gICAqIEdldCBncmFkZXMgYXJyYXkuXG4gICAqL1xuICBnZXRHcmFkZXMoKTogUHJvbWlzZTxHcmFkZUdyb3VwW10+O1xuXG4gIC8qKlxuICAgKiBHZXQgU3lsbGFidXMgKFBsYW5vIGRlIGVuc2lubykuXG4gICAqL1xuICBnZXRTeWxsYWJ1cygpOiBQcm9taXNlPFN5bGxhYnVzPjtcbn1cblxuLyoqXG4gKiBDb3Vyc2UgaW4gdGhlIHN0dWRlbnQncyB2aWV3LlxuICpcbiAqIEBjYXRlZ29yeSBJbnRlcm5hbFxuICoqL1xuZXhwb3J0IGNsYXNzIFNpZ2FhQ291cnNlU3R1ZGVudCBpbXBsZW1lbnRzIENvdXJzZVN0dWRlbnQge1xuICAvKipcbiAgICogQGluaGVyaXRkb2NcbiAgICovXG4gIHJlYWRvbmx5IHRpdGxlO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdGRvY1xuICAgKi9cbiAgcmVhZG9ubHkgY29kZTtcblxuICAvKipcbiAgICogQGluaGVyaXRkb2NcbiAgICovXG4gIHJlYWRvbmx5IG51bWJlck9mU3R1ZGVudHM7XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0ZG9jXG4gICAqL1xuICByZWFkb25seSBzY2hlZHVsZTtcblxuICAvKipcbiAgICogQGluaGVyaXRkb2NcbiAgICovXG4gIHJlYWRvbmx5IGlkO1xuXG4gIC8qKlxuICAgKiBAaW5oZXJpdGRvY1xuICAgKi9cbiAgcmVhZG9ubHkgcGVyaW9kO1xuXG4gIHByaXZhdGUgZm9ybTtcblxuICBwcml2YXRlIHJlc291cmNlcztcblxuICBwcml2YXRlIGxlc3NvblBhcnNlcjtcblxuICBjdXJyZW50UGFnZUNhY2hlPzogUGFnZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBjb3Vyc2VEYXRhOiBDb3Vyc2VTdHVkZW50RGF0YSxcbiAgICBwcml2YXRlIGh0dHA6IEhUVFAsXG4gICAgcHJpdmF0ZSBwYXJzZXI6IFBhcnNlcixcbiAgICByZXNvdXJjZXNNYW5hZ2VyRmFjdG9yeTogQ291cnNlUmVzb3VyY2VzTWFuYWdlckZhY3RvcnksXG4gICAgbGVzc29uUGFyc2VyRmFjdG9yeTogTGVzc29uUGFyc2VyRmFjdG9yeVxuICApIHtcbiAgICB0aGlzLmlkID0gY291cnNlRGF0YS5pZDtcbiAgICB0aGlzLnRpdGxlID0gY291cnNlRGF0YS50aXRsZTtcbiAgICB0aGlzLmNvZGUgPSBjb3Vyc2VEYXRhLmNvZGU7XG4gICAgdGhpcy5udW1iZXJPZlN0dWRlbnRzID0gY291cnNlRGF0YS5udW1iZXJPZlN0dWRlbnRzO1xuICAgIHRoaXMucGVyaW9kID0gY291cnNlRGF0YS5wZXJpb2Q7XG4gICAgdGhpcy5zY2hlZHVsZSA9IGNvdXJzZURhdGEuc2NoZWR1bGU7XG4gICAgdGhpcy5mb3JtID0gY291cnNlRGF0YS5mb3JtO1xuXG4gICAgdGhpcy5yZXNvdXJjZXMgPSByZXNvdXJjZXNNYW5hZ2VyRmFjdG9yeS5jcmVhdGVDb3Vyc2VSZXNvdXJjZXNNYW5hZ2VyKFxuICAgICAgdGhpcy5odHRwLFxuICAgICAgdGhpc1xuICAgICk7XG4gICAgdGhpcy5sZXNzb25QYXJzZXIgPSBsZXNzb25QYXJzZXJGYWN0b3J5LmNyZWF0ZUxlc3NvblBhcnNlcih0aGlzLnJlc291cmNlcyk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICovXG4gIHByaXZhdGUgY3VycmVudENvdXJzZVBhZ2UgPSAnUHJpbmNpcGFsJztcblxuICAvKipcbiAgICogUmVxdWVzdCB0aGUgY291cnNlIHBhZ2UgdXNpbmcgdGhlIGNvdXJzZSBJRCxcbiAgICogaXQgaXMgc2xvd2VyIHRoYW4gcmVxdWVzdENvdXJzZVBhZ2VVc2luZ0Zvcm0sXG4gICAqIGJ1dCB3b3JrcyBpZiB0aGUgZm9ybSBpcyBpbnZhbGlkLlxuICAgKiBAcmV0dXJucyBSZXNwb25zZSBwYWdlLlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyByZXF1ZXN0Q291cnNlUGFnZVVzaW5nSWQoKSB7XG4gICAgY29uc3QgcGFnZSA9IGF3YWl0IHRoaXMuaHR0cC5nZXQoJy9zaWdhYS9wb3J0YWlzL2Rpc2NlbnRlL3R1cm1hcy5qc2YnKTtcbiAgICBpZiAocGFnZS5zdGF0dXNDb2RlICE9PSAyMDApXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NJR0FBOiBVbmV4cGVjdGVkIGNvdXJzZXMgcGFnZSBzdGF0dXMgY29kZS4nKTtcblxuICAgIGNvbnN0IHRhYmxlID0gcGFnZS4kKCcubGlzdGFnZW0nKTtcbiAgICBpZiAodGFibGUubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NJR0FBOiBVbmV4cGVjdGVkIGNvdXJzZXMgcGFnZSBmb3JtYXQuJyk7XG4gICAgfVxuICAgIGNvbnN0IHJvd3MgPSB0YWJsZS5maW5kKCd0Ym9keSA+IHRyJykudG9BcnJheSgpO1xuICAgIGNvbnN0IGZvdW5kQ291cnNlID0gcm93cy5zb21lKChyb3cpID0+IHtcbiAgICAgIGNvbnN0IGNlbGxFbGVtZW50cyA9IHBhZ2UuJChyb3cpLmZpbmQoJ3RkJyk7XG4gICAgICBpZiAoY2VsbEVsZW1lbnRzLmVxKDApLmhhc0NsYXNzKCdwZXJpb2RvJykpIHJldHVybiBmYWxzZTtcbiAgICAgIGNvbnN0IGJ1dHRvbk9uQ2xpY2sgPSBjZWxsRWxlbWVudHNcbiAgICAgICAgLmVxKDUpXG4gICAgICAgIC5maW5kKCdhW29uY2xpY2tdJylcbiAgICAgICAgLmF0dHIoJ29uY2xpY2snKTtcbiAgICAgIGlmICghYnV0dG9uT25DbGljaylcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTSUdBQTogVW5leHBlY3RlZCByb3cgZm9ybWF0IGF0IGNvdXJzZXMgcGFnZS4nKTtcbiAgICAgIGNvbnN0IGZvcm0gPSBwYWdlLnBhcnNlSlNGQ0xKUyhidXR0b25PbkNsaWNrKTtcbiAgICAgIGlmIChmb3JtLnBvc3RWYWx1ZXMuaWRUdXJtYSA9PT0gdGhpcy5mb3JtLnBvc3RWYWx1ZXMuaWRUdXJtYSkge1xuICAgICAgICB0aGlzLmZvcm0gPSBmb3JtO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIWZvdW5kQ291cnNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NJR0FBOiBOb3QgZm91bmQgY291cnNlIHdpdGggaWQ6JyArIHRoaXMuaWQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0Q291cnNlUGFnZVVzaW5nRm9ybSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgdGhlIGNvdXJzZSBwYWdlIHVzaW5nIHRoZSBjb3Vyc2UgUE9TVCBGb3JtLFxuICAgKiBpdCBpcyBmYXN0ZXIgdGhhbiByZXF1ZXN0Q291cnNlUGFnZVVzaW5nSWQsXG4gICAqIGJ1dCBkb25gdCB3b3JrcyBpZiB0aGUgZm9ybSBpcyBpbnZhbGlkIG9yIGV4cGlyZWQuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHJlcXVlc3RDb3Vyc2VQYWdlVXNpbmdGb3JtKHVzZUNhY2hlID0gdHJ1ZSkge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzLmh0dHAucG9zdChcbiAgICAgIHRoaXMuZm9ybS5hY3Rpb24uaHJlZixcbiAgICAgIHRoaXMuZm9ybS5wb3N0VmFsdWVzLFxuICAgICAge1xuICAgICAgICBzaGFyZVNhbWVSZXF1ZXN0OiB0cnVlLFxuICAgICAgICBub0NhY2hlOiAhdXNlQ2FjaGVcbiAgICAgIH1cbiAgICApO1xuICAgIGlmIChwYWdlLnN0YXR1c0NvZGUgPT09IDIwMCkge1xuICAgICAgaWYgKHBhZ2UuYm9keURlY29kZWQuaW5jbHVkZXMoJ0NvbXBvcnRhbWVudG8gSW5lc3BlcmFkbyEnKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NJR0FBOiBVbmV4cGVjdGVkIGJlaGF2aW9yIG9uIHRoZSBjb3Vyc2UgcGFnZS4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwYWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NJR0FBOiBVbmV4cGVjdGVkIGNvdXJzZSBwYWdlIHN0YXR1cyBjb2RlLicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXF1ZXN0IHRoZSBjb3Vyc2UgcGFnZSB1c2luZyByZXF1ZXN0Q291cnNlUGFnZVVzaW5nRm9ybSxcbiAgICogZmFsbGJhY2sgdG8gcmVxdWVzdENvdXJzZVBhZ2VVc2luZ0lkLlxuICAgKiBAcmV0dXJucyBSZXNwb25zZSBwYWdlLlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyByZXF1ZXN0Q291cnNlUGFnZSh1c2VDYWNoZSA9IHRydWUpOiBQcm9taXNlPFBhZ2U+IHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0Q291cnNlUGFnZVVzaW5nRm9ybSh1c2VDYWNoZSkuY2F0Y2goKCkgPT5cbiAgICAgIHRoaXMucmVxdWVzdENvdXJzZVBhZ2VVc2luZ0lkKClcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSB2ZXJpZnlJZkNvdXJzZVBhZ2VJc1ZhbGlkKHBhZ2U6IFBhZ2UsIGJ1dHRvbkxhYmVsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAocGFnZS5zdGF0dXNDb2RlICE9PSAyMDApXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NJR0FBOiBJbnZhbGlkIGNvdXJzZSBwYWdlIHN0YXR1cyBjb2RlLicpO1xuXG4gICAgbGV0IHBhZ2VDb3Vyc2VDb2RlOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgaWYgKGJ1dHRvbkxhYmVsID09PSAnVmVyIE5vdGFzJykge1xuICAgICAgcGFnZUNvdXJzZUNvZGUgPSB0aGlzLnBhcnNlclxuICAgICAgICAucmVtb3ZlVGFnc0h0bWwocGFnZS4kKCcjcmVsYXRvcmlvIGgzJykuaHRtbCgpKVxuICAgICAgICAuc3BsaXQoJyAtICcpWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYWdlQ291cnNlQ29kZSA9IHRoaXMucGFyc2VyXG4gICAgICAgIC5yZW1vdmVUYWdzSHRtbChwYWdlLiQoJyNsaW5rQ29kaWdvVHVybWEnKS5odG1sKCkpXG4gICAgICAgIC5yZXBsYWNlKC8gLSQvLCAnJyk7XG4gICAgfVxuXG4gICAgaWYgKHBhZ2VDb3Vyc2VDb2RlICE9PSB0aGlzLmNvZGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1NJR0FBOiBVc2luZyB0aGUgb2xkIHBhZ2UgY2F1c2VkIHRoZSBjaGFuZ2UgdG8gdGhlIGxhc3QgYWNjZXNzZWQgY291cnNlIGluc3RlYWQgb2YgdGhlIHJlcXVlc3RlZCBjb3Vyc2UuJ1xuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVjZWl2ZSB0aGUgbmFtZSBvZiB0aGUgc2lkZSB0YWIgYW5kIGxvYWQgdGhlIHRhYiBwYWdlXG4gICAqIEBwYXJhbSBidXR0b25MYWJlbFxuICAgKiBAcGFyYW0gcmV0cnlcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZ2V0Q291cnNlU3ViTWVudShcbiAgICBidXR0b25MYWJlbDogc3RyaW5nLFxuICAgIHJldHJ5ID0gdHJ1ZVxuICApOiBQcm9taXNlPFBhZ2U+IHtcbiAgICBpZiAoYnV0dG9uTGFiZWwgPT09IHRoaXMuY3VycmVudENvdXJzZVBhZ2UpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlQ2FjaGUpIHJldHVybiB0aGlzLmN1cnJlbnRQYWdlQ2FjaGU7XG4gICAgfVxuXG4gICAgY29uc3QgcGFnZSA9IGF3YWl0IHRoaXMucmVxdWVzdENvdXJzZVBhZ2UocmV0cnkpO1xuXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IHBhZ2VcbiAgICAgIC4kKCdkaXYuaXRlbU1lbnUnKVxuICAgICAgLnRvQXJyYXkoKVxuICAgICAgLmZpbmQoXG4gICAgICAgIChidXR0b25FbCkgPT5cbiAgICAgICAgICB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChwYWdlLiQoYnV0dG9uRWwpLmh0bWwoKSkgPT09IGJ1dHRvbkxhYmVsXG4gICAgICApO1xuXG4gICAgaWYgKCFidXR0b25FbGVtZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NJR0FBOiBDb3Vyc2Ugc3ViIG1lbnUgYnV0dG9uIG5vdCBmb3VuZC4nKTtcbiAgICB9XG5cbiAgICBjb25zdCBidXR0b25PbkNsaWNrID0gcGFnZS4kKGJ1dHRvbkVsZW1lbnQpLnBhcmVudCgpLmF0dHIoJ29uY2xpY2snKTtcbiAgICBpZiAoIWJ1dHRvbk9uQ2xpY2spXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdTSUdBQTogQ291cnNlIHN1YiBtZW51IGJ1dHRvbiBkb2VzIG5vdCBoYXZlIHRoZSBvbmNsaWNrIGV2ZW50LidcbiAgICAgICk7XG5cbiAgICBjb25zdCBmb3JtID0gcGFnZS5wYXJzZUpTRkNMSlMoYnV0dG9uT25DbGljayk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhZ2VSZXNwb25zZSA9IGF3YWl0IHRoaXMuaHR0cC5wb3N0KFxuICAgICAgICBmb3JtLmFjdGlvbi5ocmVmLFxuICAgICAgICBmb3JtLnBvc3RWYWx1ZXNcbiAgICAgICk7XG4gICAgICB0aGlzLnZlcmlmeUlmQ291cnNlUGFnZUlzVmFsaWQocGFnZVJlc3BvbnNlLCBidXR0b25MYWJlbCk7XG4gICAgICBpZiAocGFnZVJlc3BvbnNlLmJvZHlEZWNvZGVkLmluY2x1ZGVzKCdNZW51IFR1cm1hIFZpcnR1YWwnKSkge1xuICAgICAgICB0aGlzLmN1cnJlbnRQYWdlQ2FjaGUgPSBwYWdlUmVzcG9uc2U7XG4gICAgICB9XG4gICAgICB0aGlzLmN1cnJlbnRDb3Vyc2VQYWdlID0gYnV0dG9uTGFiZWw7XG4gICAgICByZXR1cm4gcGFnZVJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKHJldHJ5KSB7XG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2VDYWNoZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jdXJyZW50Q291cnNlUGFnZSA9ICdQcmluY2lwYWwnO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb3Vyc2VTdWJNZW51KGJ1dHRvbkxhYmVsLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY2VpdmUgdGhlIG5hbWUgb2YgdGhlIGNhcmQgb24gdGhlIHJpZ2h0IG9mIHRoZSBwYWdlIGFuZCByZXR1cm4gaXRcbiAgICogQHBhcmFtIHBhZ2VcbiAgICogQHBhcmFtIGNhcmRUaXRsZVxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBnZXRSaWdodFNpZGViYXJDYXJkKFxuICAgIHBhZ2U6IFBhZ2UsXG4gICAgY2FyZFRpdGxlOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxjaGVlcmlvLkNoZWVyaW8+IHtcbiAgICBjb25zdCB0aXRsZUVsZW1lbnQgPSBwYWdlXG4gICAgICAuJCgnLnJpY2gtc3RnbHBhbmVsLWhlYWRlci5oZWFkZXJCbG9jbycpXG4gICAgICAudG9BcnJheSgpXG4gICAgICAuZmluZCgodGl0bGVFbGVtZW50KSA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgdGhpcy5wYXJzZXIucmVtb3ZlVGFnc0h0bWwocGFnZS4kKHRpdGxlRWxlbWVudCkuaHRtbCgpKSA9PT0gY2FyZFRpdGxlXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICBpZiAoIXRpdGxlRWxlbWVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTSUdBQTogQ291cnNlIHNpZGViYXIgY2FyZCBub3QgZm91bmQuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwYWdlLiQodGl0bGVFbGVtZW50KS5wYXJlbnQoKS5wYXJlbnQoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBnZXRMZXNzb25QYWdlVHlwZShwYWdlOiBQYWdlKTogJ2xpc3QnIHwgJ3BhZ2VkJyB8ICd1bmtub3duJyB7XG4gICAgaWYgKFxuICAgICAgcGFnZS4kKCcjZm9ybUFjb2VzVHVybWFcXFxcOnZpc3VhbGl6YXJBdWxhc0VtTGlzdGEnKS5sZW5ndGggPT09IDAgJiZcbiAgICAgIHBhZ2UuJCgnI2Zvcm1BY29lc1R1cm1hXFxcXDp2aXN1YWxpemFyUGFnaW5hZGFzJykubGVuZ3RoID09PSAxXG4gICAgKVxuICAgICAgcmV0dXJuICdsaXN0JztcblxuICAgIGlmIChcbiAgICAgIHBhZ2UuJCgnI2Zvcm1BY29lc1R1cm1hXFxcXDp2aXN1YWxpemFyQXVsYXNFbUxpc3RhJykubGVuZ3RoID09PSAxICYmXG4gICAgICBwYWdlLiQoJyNmb3JtQWNvZXNUdXJtYVxcXFw6dmlzdWFsaXphclBhZ2luYWRhcycpLmxlbmd0aCA9PT0gMFxuICAgIClcbiAgICAgIHJldHVybiAncGFnZWQnO1xuICAgIHJldHVybiAndW5rbm93bic7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXRkb2NcbiAgICovXG4gIGFzeW5jIGdldExlc3NvbnMoKTogUHJvbWlzZTxMZXNzb25bXT4ge1xuICAgIGNvbnN0IHBhZ2VMZXNzb25zT25lID0gYXdhaXQgdGhpcy5nZXRDb3Vyc2VTdWJNZW51KCdQcmluY2lwYWwnKTtcbiAgICBsZXQgb25jbGljaztcblxuICAgIGNvbnN0IHBhZ2VMZXNzb25zT25lVHlwZSA9XG4gICAgICBTaWdhYUNvdXJzZVN0dWRlbnQuZ2V0TGVzc29uUGFnZVR5cGUocGFnZUxlc3NvbnNPbmUpO1xuXG4gICAgaWYgKHBhZ2VMZXNzb25zT25lVHlwZSA9PSAnbGlzdCcpIHtcbiAgICAgIG9uY2xpY2sgPSBwYWdlTGVzc29uc09uZVxuICAgICAgICAuJCgnI2Zvcm1BY29lc1R1cm1hXFxcXDpsaW5rRXhpYmlyUGFnaW5hZG9zJylcbiAgICAgICAgLmF0dHIoJ29uY2xpY2snKTtcbiAgICB9XG5cbiAgICBpZiAocGFnZUxlc3NvbnNPbmVUeXBlID09ICdwYWdlZCcpIHtcbiAgICAgIG9uY2xpY2sgPSBwYWdlTGVzc29uc09uZVxuICAgICAgICAuJCgnI2Zvcm1BY29lc1R1cm1hXFxcXDpsaW5rRXhpYmlyRW1MaXN0YScpXG4gICAgICAgIC5hdHRyKCdvbmNsaWNrJyk7XG4gICAgfVxuXG4gICAgaWYgKCFvbmNsaWNrKSB0aHJvdyBuZXcgRXJyb3IoJ1NJR0FBOiBDYW5ub3QgZmluZCB0aGUgbGVzc29uIGxpc3QgdG9vZ2xlLicpO1xuXG4gICAgY29uc3QgZm9ybSA9IHBhZ2VMZXNzb25zT25lLnBhcnNlSlNGQ0xKUyhvbmNsaWNrKTtcbiAgICBjb25zdCBwYWdlTGVzc29uc1R3byA9IGF3YWl0IHRoaXMuaHR0cC5wb3N0KFxuICAgICAgZm9ybS5hY3Rpb24uaHJlZixcbiAgICAgIGZvcm0ucG9zdFZhbHVlc1xuICAgICk7XG5cbiAgICB0aGlzLnZlcmlmeUlmQ291cnNlUGFnZUlzVmFsaWQocGFnZUxlc3NvbnNUd28sICdQcmluY2lwYWwnKTtcblxuICAgIGNvbnN0IHBhZ2VMZXNzb25zVHdvVHlwZSA9XG4gICAgICBTaWdhYUNvdXJzZVN0dWRlbnQuZ2V0TGVzc29uUGFnZVR5cGUocGFnZUxlc3NvbnNUd28pO1xuICAgIGxldCBwYWdlTGVzc29uc1BhZ2VkO1xuICAgIGxldCBwYWdlTGVzc29uc0xpc3Q7XG5cbiAgICBpZiAocGFnZUxlc3NvbnNPbmVUeXBlID09ICdwYWdlZCcgJiYgcGFnZUxlc3NvbnNUd29UeXBlID09ICdsaXN0Jykge1xuICAgICAgcGFnZUxlc3NvbnNQYWdlZCA9IHBhZ2VMZXNzb25zT25lO1xuICAgICAgcGFnZUxlc3NvbnNMaXN0ID0gcGFnZUxlc3NvbnNUd287XG4gICAgfSBlbHNlIGlmIChwYWdlTGVzc29uc09uZVR5cGUgPT0gJ2xpc3QnICYmIHBhZ2VMZXNzb25zVHdvVHlwZSA9PSAncGFnZWQnKSB7XG4gICAgICBwYWdlTGVzc29uc1BhZ2VkID0gcGFnZUxlc3NvbnNUd287XG4gICAgICBwYWdlTGVzc29uc0xpc3QgPSBwYWdlTGVzc29uc09uZTtcbiAgICB9IGVsc2VcbiAgICAgIHRocm93IG5ldyBFcnJvcignU0lHQUE6IExlc3NvbiBwYWdlIHR5cGVzIG90aGVyIHRoYW4gZXhwZWN0ZWQgdHlwZXMuJyk7XG5cbiAgICB0aGlzLmxlc3NvblBhcnNlci5wYXJzZUxlc3NvblBhZ2VzKHBhZ2VMZXNzb25zTGlzdCwgcGFnZUxlc3NvbnNQYWdlZCk7XG4gICAgcmV0dXJuIHRoaXMucmVzb3VyY2VzLmxlc3NvbnMuaW5zdGFuY2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0ZG9jXG4gICAqL1xuICBhc3luYyBnZXRGaWxlcygpOiBQcm9taXNlPEZpbGVbXT4ge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzLmdldENvdXJzZVN1Yk1lbnUoJ0FycXVpdm9zJyk7XG4gICAgY29uc3QgdGFibGUgPSBwYWdlLiQoJy5saXN0aW5nJyk7XG4gICAgY29uc3QgdXNlZEZpbGVzSWQgPSBbXTtcbiAgICBpZiAodGFibGUubGVuZ3RoICE9PSAwKSB7XG4gICAgICBjb25zdCByb3dzID0gdGFibGUuZmluZCgndHJbY2xhc3NdJykudG9BcnJheSgpO1xuICAgICAgZm9yIChjb25zdCByb3cgb2Ygcm93cykge1xuICAgICAgICBjb25zdCBjZWxscyA9IHBhZ2UuJChyb3cpLmNoaWxkcmVuKCk7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5wYXJzZXIucmVtb3ZlVGFnc0h0bWwoY2VsbHMuZmlyc3QoKS5odG1sKCkpO1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMucGFyc2VyLnJlbW92ZVRhZ3NIdG1sKGNlbGxzLmVxKDEpLmh0bWwoKSk7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBjZWxscy5lcSgzKS5maW5kKCdhW29uY2xpY2tdJyk7XG4gICAgICAgIGNvbnN0IGJ1dHRvbk9uY2xpY2sgPSBidXR0b25FbGVtZW50LmF0dHIoJ29uY2xpY2snKTtcbiAgICAgICAgaWYgKCFidXR0b25PbmNsaWNrKVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICdTSUdBQTogQnV0dG9uIGluIHRoZSBmaWxlIHRhYmxlIGRvZXMgbm90IGhhdmUgdGhlIG9uY2xpY2sgZXZlbnQuJ1xuICAgICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgZm9ybSA9IHBhZ2UucGFyc2VKU0ZDTEpTKGJ1dHRvbk9uY2xpY2spO1xuICAgICAgICBjb25zdCBpZCA9IGZvcm0ucG9zdFZhbHVlc1snaWQnXTtcbiAgICAgICAgY29uc3Qga2V5ID0gZm9ybS5wb3N0VmFsdWVzWydrZXknXTtcbiAgICAgICAgY29uc3QgZmlsZU9wdGlvbnMgPSB7XG4gICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgaWQsXG4gICAgICAgICAga2V5LFxuICAgICAgICAgIGluc3RhbmNlSW5kZW50aWZpZXI6IGlkXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVzb3VyY2VzLmZpbGVzLnVwc2VydChmaWxlT3B0aW9ucyk7XG4gICAgICAgIHVzZWRGaWxlc0lkLnB1c2goaWQpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlc291cmNlcy5maWxlcy5rZWVwT25seSh1c2VkRmlsZXNJZCk7XG4gICAgcmV0dXJuIHRoaXMucmVzb3VyY2VzLmZpbGVzLmluc3RhbmNlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdGRvY1xuICAgKi9cbiAgYXN5bmMgZ2V0Rm9ydW1zKCk6IFByb21pc2U8Q291cnNlRm9ydW1bXT4ge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzLmdldENvdXJzZVN1Yk1lbnUoJ0bDs3J1bnMnKTtcblxuICAgIGNvbnN0IHRhYmxlID0gcGFnZS4kKCcubGlzdGluZycpO1xuICAgIGNvbnN0IHVzZWRGb3J1bUlkczogc3RyaW5nW10gPSBbXTtcbiAgICBpZiAodGFibGUubGVuZ3RoICE9PSAwKSB7XG4gICAgICBsZXQgZm9ydW1zSWRJbmRleCA9IDA7XG4gICAgICBjb25zdCByb3dzID0gdGFibGUuZmluZCgndHJbY2xhc3NdJykudG9BcnJheSgpO1xuICAgICAgZm9yIChjb25zdCByb3cgb2Ygcm93cykge1xuICAgICAgICBjb25zdCBjZWxscyA9IHBhZ2UuJChyb3cpLmNoaWxkcmVuKCk7XG4gICAgICAgIGNvbnN0IHRpdGxlRWxlbWVudCA9IGNlbGxzLmZpcnN0KCkuZmluZCgnYScpO1xuICAgICAgICBjb25zdCB0aXRsZSA9IHRoaXMucGFyc2VyLnJlbW92ZVRhZ3NIdG1sKHRpdGxlRWxlbWVudC5odG1sKCkpO1xuICAgICAgICBjb25zdCBmb3J1bVR5cGUgPSB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChjZWxscy5lcSgxKS5odG1sKCkpO1xuICAgICAgICBjb25zdCBudW1PZlRvcGljcyA9IHBhcnNlSW50KFxuICAgICAgICAgIHRoaXMucGFyc2VyLnJlbW92ZVRhZ3NIdG1sKGNlbGxzLmVxKDIpLmh0bWwoKSksXG4gICAgICAgICAgMTBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgYXV0aG9yID0gdGhpcy5wYXJzZXIucmVtb3ZlVGFnc0h0bWwoY2VsbHMuZXEoMykuaHRtbCgpKTtcbiAgICAgICAgY29uc3QgY3JlYXRpb25EYXRlID0gdGhpcy5wYXJzZXIucGFyc2VEYXRlcyhcbiAgICAgICAgICB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChjZWxscy5lcSg0KS5odG1sKCkpLFxuICAgICAgICAgIDFcbiAgICAgICAgKVswXTtcbiAgICAgICAgY29uc3QgdGl0bGVPbkNsaWNrID0gdGl0bGVFbGVtZW50LmF0dHIoJ29uY2xpY2snKTtcbiAgICAgICAgaWYgKCF0aXRsZU9uQ2xpY2spXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTSUdBQTogRm9ydW0gdGl0bGUgZG9lcyBub3QgaGF2ZSBvbmNsaWNrIGV2ZW50LicpO1xuXG4gICAgICAgIGNvbnN0IGZvcm0gPSBwYWdlLnBhcnNlSlNGQ0xKUyh0aXRsZU9uQ2xpY2spO1xuICAgICAgICBjb25zdCBpZCA9IGZvcnVtc0lkSW5kZXg7XG4gICAgICAgIGZvcnVtc0lkSW5kZXgrKztcbiAgICAgICAgY29uc3QgZm9ydW1PcHRpb25zOiBGb3J1bURhdGEgPSB7XG4gICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgaWQ6IGlkLnRvU3RyaW5nKCksXG4gICAgICAgICAgaW5zdGFuY2VJbmRlbnRpZmllcjogaWQudG9TdHJpbmcoKSxcbiAgICAgICAgICBmb3J1bVR5cGUsXG4gICAgICAgICAgbnVtT2ZUb3BpY3M6IG51bU9mVG9waWNzLFxuICAgICAgICAgIGF1dGhvcixcbiAgICAgICAgICBjcmVhdGlvbkRhdGUsXG4gICAgICAgICAgZm9ybVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlc291cmNlcy5mb3J1bXMudXBzZXJ0KGZvcnVtT3B0aW9ucyk7XG4gICAgICAgIHVzZWRGb3J1bUlkcy5wdXNoKGlkLnRvU3RyaW5nKCkpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlc291cmNlcy5mb3J1bXMua2VlcE9ubHkodXNlZEZvcnVtSWRzKTtcbiAgICByZXR1cm4gdGhpcy5yZXNvdXJjZXMuZm9ydW1zLmluc3RhbmNlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdGRvY1xuICAgKi9cbiAgYXN5bmMgZ2V0TmV3cygpOiBQcm9taXNlPE5ld3NbXT4ge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzLmdldENvdXJzZVN1Yk1lbnUoJ05vdMOtY2lhcycpO1xuICAgIGNvbnN0IHRhYmxlID0gcGFnZS4kKCcubGlzdGluZycpO1xuICAgIGNvbnN0IHVzZWROZXdzSWQgPSBbXTtcbiAgICBpZiAodGFibGUubGVuZ3RoICE9PSAwKSB7XG4gICAgICBjb25zdCByb3dzID0gdGFibGUuZmluZCgndHJbY2xhc3NdJykudG9BcnJheSgpO1xuICAgICAgZm9yIChjb25zdCByb3cgb2Ygcm93cykge1xuICAgICAgICBjb25zdCBjZWxsID0gcGFnZS4kKHJvdykuY2hpbGRyZW4oKTtcbiAgICAgICAgY29uc3QgdGl0bGUgPSB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChjZWxsLmZpcnN0KCkuaHRtbCgpKTtcblxuICAgICAgICBjb25zdCBidXR0b25FbGVtZW50ID0gY2VsbC5lcSgyKS5jaGlsZHJlbigpLmZpcnN0KCk7XG4gICAgICAgIGNvbnN0IGJ1dHRvbk9uQ2xpY2sgPSBidXR0b25FbGVtZW50LmF0dHIoJ29uY2xpY2snKTtcbiAgICAgICAgaWYgKCFidXR0b25PbkNsaWNrKVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICdTSUdBQTogTmV3cyBvbmNsaWNrIGJ1dHRvbiBkb2VzIG5vdCBoYXZlIG9uY2xpY2sgZXZlbnQuJ1xuICAgICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgZm9ybSA9IHBhZ2UucGFyc2VKU0ZDTEpTKGJ1dHRvbk9uQ2xpY2spO1xuICAgICAgICBjb25zdCBpZCA9IGZvcm0ucG9zdFZhbHVlcy5pZDtcbiAgICAgICAgY29uc3QgbmV3c09wdGlvbnM6IE5ld3NEYXRhID0ge1xuICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgIGZvcm0sXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgaW5zdGFuY2VJbmRlbnRpZmllcjogaWRcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZXNvdXJjZXMubmV3cy51cHNlcnQobmV3c09wdGlvbnMpO1xuICAgICAgICB1c2VkTmV3c0lkLnB1c2goaWQpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlc291cmNlcy5uZXdzLmtlZXBPbmx5KHVzZWROZXdzSWQpO1xuICAgIHJldHVybiB0aGlzLnJlc291cmNlcy5uZXdzLmluc3RhbmNlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdGRvY1xuICAgKi9cbiAgYXN5bmMgZ2V0QWJzZW5jZSgpOiBQcm9taXNlPEFic2VuY2VMaXN0PiB7XG4gICAgY29uc3QgcGFnZSA9IGF3YWl0IHRoaXMuZ2V0Q291cnNlU3ViTWVudSgnRnJlcXXDqm5jaWEnKTtcbiAgICBjb25zdCB0YWJsZSA9IHBhZ2UuJCgnLmxpc3RpbmcnKTtcbiAgICBjb25zdCBhYnNlbmNlczogQWJzZW5jZURheVtdID0gW107XG4gICAgY29uc3Qgcm93cyA9IHRhYmxlLmZpbmQoJ3RyW2NsYXNzXScpLnRvQXJyYXkoKTtcbiAgICBmb3IgKGNvbnN0IHJvdyBvZiByb3dzKSB7XG4gICAgICBjb25zdCBjZWxscyA9IHBhZ2UuJChyb3cpLmNoaWxkcmVuKCk7XG4gICAgICBjb25zdCBkYXRlID0gdGhpcy5wYXJzZXIucmVtb3ZlVGFnc0h0bWwoY2VsbHMuZmlyc3QoKS5odG1sKCkpO1xuICAgICAgY29uc3QgYWJzZW5jZVN0cmluZyA9IHRoaXMucGFyc2VyLnJlbW92ZVRhZ3NIdG1sKGNlbGxzLmVxKDEpLmh0bWwoKSk7XG4gICAgICBsZXQgbnVtT2ZBYnNlbmNlcztcbiAgICAgIGlmIChhYnNlbmNlU3RyaW5nID09PSAnJyB8fCBhYnNlbmNlU3RyaW5nID09PSAnTsOjbyBJbmZvcm1hZGEnKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIGlmIChhYnNlbmNlU3RyaW5nID09PSAnUHJlc2VudGUnKSB7XG4gICAgICAgIG51bU9mQWJzZW5jZXMgPSAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbnVtT2ZBYnNlbmNlcyA9IHBhcnNlSW50KGFic2VuY2VTdHJpbmcucmVwbGFjZSgvXFxEL2dtLCAnJyksIDEwKTtcbiAgICAgIH1cbiAgICAgIGFic2VuY2VzLnB1c2goe1xuICAgICAgICBkYXRlOiB0aGlzLnBhcnNlci5wYXJzZURhdGVzKGRhdGUsIDEpWzBdLFxuICAgICAgICBudW1PZkFic2VuY2VzXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgZGV0YWlscyA9IHRoaXMucGFyc2VyXG4gICAgICAucmVtb3ZlVGFnc0h0bWwocGFnZS4kKCcuYm90b2VzLXNob3cnKS5odG1sKCkpXG4gICAgICAuc3BsaXQoJ1xcbicpO1xuXG4gICAgbGV0IHRvdGFsQWJzZW5jZXMsIG1heEFic2VuY2VzO1xuXG4gICAgZm9yIChjb25zdCBkZXRhaWwgb2YgZGV0YWlscykge1xuICAgICAgaWYgKGRldGFpbC5pbmNsdWRlcygnVG90YWwgZGUgRmFsdGFzJykpIHtcbiAgICAgICAgdG90YWxBYnNlbmNlcyA9IHBhcnNlSW50KGRldGFpbC5yZXBsYWNlKC9cXEQvZ20sICcnKSwgMTApO1xuICAgICAgfSBlbHNlIGlmIChkZXRhaWwuaW5jbHVkZXMoJ03DoXhpbW8gZGUgRmFsdGFzIFBlcm1pdGlkbycpKSB7XG4gICAgICAgIG1heEFic2VuY2VzID0gcGFyc2VJbnQoZGV0YWlsLnJlcGxhY2UoL1xcRC9nbSwgJycpLCAxMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBtYXhBYnNlbmNlcyAhPT0gJ251bWJlcicgfHwgdHlwZW9mIHRvdGFsQWJzZW5jZXMgIT09ICdudW1iZXInKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTSUdBQTogSW52YWxpZCBhYnNlbmNlIHBhZ2UgZm9ybWF0LicpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxpc3Q6IGFic2VuY2VzLFxuICAgICAgdG90YWxBYnNlbmNlcyxcbiAgICAgIG1heEFic2VuY2VzXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSB0aGUgc2lkZSBldmFsdWF0aW9uIGNhcmQgYW5kIHJldHVybnMgdGhlIG5hbWUgb2YgZWFjaCBldmFsdWF0aW9uIGFuZCB0aGUgZGF0ZSBpZiBpdCBoYXNcbiAgICovXG4gIGFzeW5jIGdldEV4YW1DYWxlbmRhcigpOiBQcm9taXNlPEV4YW1bXT4ge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzLnJlcXVlc3RDb3Vyc2VQYWdlKCk7XG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZ2V0UmlnaHRTaWRlYmFyQ2FyZChwYWdlLCAnQXZhbGlhw6fDtWVzJyk7XG4gICAgY29uc3QgZXhhbUVsZW1lbnRzID0gY2FyZC5maW5kKCdsaScpLnRvQXJyYXkoKTtcbiAgICBjb25zdCBleGFtTGlzdDogRXhhbVtdID0gW107XG4gICAgY29uc3QgeWVhclN0cmluZyA9IHRoaXMucGVyaW9kLnNwbGl0KCcuJylbMF07XG4gICAgZm9yIChjb25zdCBleGFtRWxlbWVudCBvZiBleGFtRWxlbWVudHMpIHtcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gdGhpcy5wYXJzZXIucmVtb3ZlVGFnc0h0bWwoXG4gICAgICAgIHBhZ2UuJChleGFtRWxlbWVudCkuZmluZCgnc3Bhbi5kZXNjcmljYW8nKS5odG1sKClcbiAgICAgICk7XG4gICAgICBjb25zdCBkYXRlSHRtbCA9IHBhZ2UuJChleGFtRWxlbWVudCkuZmluZCgnc3Bhbi5kYXRhJykuaHRtbCgpO1xuICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IHRoaXMucGFyc2VyLnJlbW92ZVRhZ3NIdG1sKGRhdGVIdG1sKTtcbiAgICAgIGxldCBkYXRlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGF0ZSA9IHRoaXMucGFyc2VyLnBhcnNlRGF0ZXMoXG4gICAgICAgICAgZGF0ZVN0cmluZyxcbiAgICAgICAgICAxLFxuICAgICAgICAgIHBhcnNlSW50KHllYXJTdHJpbmcsIDEwKVxuICAgICAgICApWzBdO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZGF0ZSA9IHRoaXMucGFyc2VyLnBhcnNlRGF0ZXMoZGF0ZVN0cmluZywgMilbMF07XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gICAgICAgIH0gY2F0Y2ggKGVycikge31cbiAgICAgIH1cblxuICAgICAgZXhhbUxpc3QucHVzaCh7XG4gICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICBkYXRlXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGV4YW1MaXN0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0ZG9jXG4gICAqL1xuICBhc3luYyBnZXRRdWl6emVzKCk6IFByb21pc2U8UXVpeltdPiB7XG4gICAgY29uc3QgcGFnZSA9IGF3YWl0IHRoaXMuZ2V0Q291cnNlU3ViTWVudSgnUXVlc3Rpb27DoXJpb3MnKTtcblxuICAgIGNvbnN0IHRhYmxlID0gcGFnZS4kKCcubGlzdGluZycpO1xuXG4gICAgY29uc3QgdXNlZFF1aXp6ZXNJZHMgPSBbXTtcbiAgICBpZiAodGFibGUubGVuZ3RoID09PSAwKSByZXR1cm4gW107XG4gICAgY29uc3Qgcm93cyA9IHRhYmxlLmZpbmQoJ3RyW2NsYXNzXScpLnRvQXJyYXkoKTtcblxuICAgIGZvciAoY29uc3Qgcm93IG9mIHJvd3MpIHtcbiAgICAgIGNvbnN0IGNlbGxzID0gcGFnZS4kKHJvdykuZmluZCgndGQnKTtcbiAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5wYXJzZXIucmVtb3ZlVGFnc0h0bWwoY2VsbHMuZmlyc3QoKS5odG1sKCkpO1xuICAgICAgY29uc3Qgc3RhcnREYXRlID0gdGhpcy5wYXJzZXIucGFyc2VEYXRlcyhcbiAgICAgICAgdGhpcy5wYXJzZXIucmVtb3ZlVGFnc0h0bWwoY2VsbHMuZXEoMSkuaHRtbCgpKSxcbiAgICAgICAgMVxuICAgICAgKVswXTtcbiAgICAgIGNvbnN0IGVuZERhdGUgPSB0aGlzLnBhcnNlci5wYXJzZURhdGVzKFxuICAgICAgICB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChjZWxscy5lcSgyKS5odG1sKCkpLFxuICAgICAgICAxXG4gICAgICApWzBdO1xuICAgICAgY29uc3QgYnV0dG9uU2VuZEFuc3dlcnNFbGVtZW50ID0gY2VsbHMuZXEoMykuZmluZCgnYVtvbmNsaWNrXScpO1xuICAgICAgbGV0IGZvcm1TZW5kQW5zd2VycztcbiAgICAgIGlmIChidXR0b25TZW5kQW5zd2Vyc0VsZW1lbnQubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBidXR0b25PbmNsaWNrID0gYnV0dG9uU2VuZEFuc3dlcnNFbGVtZW50LmF0dHIoJ29uY2xpY2snKTtcbiAgICAgICAgaWYgKCFidXR0b25PbmNsaWNrKVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICdTSUdBQTogcXVpeiBidXR0b24gb25jbGljayBkb2VzIG5vdCBoYXZlIG9uY2xpY2sgZXZlbnQuJ1xuICAgICAgICAgICk7XG4gICAgICAgIGZvcm1TZW5kQW5zd2VycyA9IHBhZ2UucGFyc2VKU0ZDTEpTKGJ1dHRvbk9uY2xpY2spO1xuICAgICAgfVxuICAgICAgY29uc3QgYnV0dG9uVmlld0Fuc3dlcnNTdWJtaXR0ZWRFbGVtZW50ID0gY2VsbHMuZXEoNCkuZmluZCgnYVtvbmNsaWNrXScpO1xuICAgICAgbGV0IGZvcm1WaWV3QW5zd2Vyc1N1Ym1pdHRlZDtcbiAgICAgIGlmIChidXR0b25WaWV3QW5zd2Vyc1N1Ym1pdHRlZEVsZW1lbnQubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBidXR0b25PbmNsaWNrID0gYnV0dG9uVmlld0Fuc3dlcnNTdWJtaXR0ZWRFbGVtZW50LmF0dHIoJ29uY2xpY2snKTtcbiAgICAgICAgaWYgKCFidXR0b25PbmNsaWNrKVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICdTSUdBQTogcXVpeiBidXR0b24gb25jbGljayBkb2VzIG5vdCBoYXZlIG9uY2xpY2sgZXZlbnQuJ1xuICAgICAgICAgICk7XG4gICAgICAgIGZvcm1WaWV3QW5zd2Vyc1N1Ym1pdHRlZCA9IHBhZ2UucGFyc2VKU0ZDTEpTKGJ1dHRvbk9uY2xpY2spO1xuICAgICAgfVxuICAgICAgY29uc3QgZm9ybSA9IGZvcm1TZW5kQW5zd2VycyB8fCBmb3JtVmlld0Fuc3dlcnNTdWJtaXR0ZWQ7XG4gICAgICBsZXQgaWQ7XG4gICAgICBpZiAoIWZvcm0pIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlc291cmNlcy5sZXNzb25zLmluc3RhbmNlcy5sZW5ndGgpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmdldExlc3NvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBxdWl6ID0gdGhpcy5yZXNvdXJjZXMucXVpenplcy5pbnN0YW5jZXMuZmluZChcbiAgICAgICAgICAocXVpeikgPT4gcXVpei50aXRsZSA9PT0gdGl0bGVcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHF1aXopIHtcbiAgICAgICAgICBpZCA9IHF1aXouaWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTSUdBQTogTm90IGZvdW5kIHF1aXogYnkgdGl0bGUuJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlkID0gZm9ybS5wb3N0VmFsdWVzLmlkO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBxdWl6T3B0aW9uczogUXVpekRhdGEgPSB7XG4gICAgICAgIHRpdGxlLFxuICAgICAgICBzdGFydERhdGUsXG4gICAgICAgIGVuZERhdGUsXG4gICAgICAgIGlkLFxuICAgICAgICBpbnN0YW5jZUluZGVudGlmaWVyOiBpZCxcbiAgICAgICAgZm9ybVNlbmRBbnN3ZXJzLFxuICAgICAgICBmb3JtVmlld0Fuc3dlcnNTdWJtaXR0ZWRcbiAgICAgIH07XG4gICAgICB0aGlzLnJlc291cmNlcy5xdWl6emVzLnVwc2VydChxdWl6T3B0aW9ucyk7XG4gICAgICB1c2VkUXVpenplc0lkcy5wdXNoKGlkKTtcbiAgICB9XG4gICAgdGhpcy5yZXNvdXJjZXMucXVpenplcy5rZWVwT25seSh1c2VkUXVpenplc0lkcyk7XG4gICAgcmV0dXJuIHRoaXMucmVzb3VyY2VzLnF1aXp6ZXMuaW5zdGFuY2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0ZG9jXG4gICAqL1xuICBhc3luYyBnZXRXZWJDb250ZW50cygpOiBQcm9taXNlPFdlYkNvbnRlbnRbXT4ge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzLmdldENvdXJzZVN1Yk1lbnUoJ0NvbnRlw7pkby9Qw6FnaW5hIHdlYicpO1xuXG4gICAgY29uc3QgdGFibGUgPSBwYWdlLiQoJy5saXN0aW5nJyk7XG5cbiAgICBjb25zdCB1c2VkV2ViQ29udGVudHNJZHMgPSBbXTtcbiAgICBpZiAodGFibGUubGVuZ3RoICE9PSAwKSB7XG4gICAgICBjb25zdCByb3dzID0gdGFibGUuZmluZCgndHJbY2xhc3NdJykudG9BcnJheSgpO1xuXG4gICAgICBmb3IgKGNvbnN0IHJvdyBvZiByb3dzKSB7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gcGFnZS4kKHJvdykuZmluZCgndGQnKTtcbiAgICAgICAgY29uc3QgdGl0bGUgPSB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChjZWxscy5maXJzdCgpLmh0bWwoKSk7XG4gICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChjZWxscy5lcSgxKS5odG1sKCkpO1xuICAgICAgICBjb25zdCBkYXRlID0gdGhpcy5wYXJzZXIucGFyc2VEYXRlcyhkYXRlU3RyaW5nLCAxKVswXTtcbiAgICAgICAgY29uc3QgYnV0dG9uT25jbGljayA9IHBhZ2VcbiAgICAgICAgICAuJChjZWxsc1syXSlcbiAgICAgICAgICAuZmluZCgnYVtvbmNsaWNrXScpXG4gICAgICAgICAgLmF0dHIoJ29uY2xpY2snKTtcblxuICAgICAgICBpZiAoIWJ1dHRvbk9uY2xpY2spXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgJ1NJR0FBOiBXZWJjb250ZW50IGhhcyBidXR0b24gd2l0aG91dCBvbmNsaWNrIGV2ZW50LidcbiAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGZvcm0gPSBwYWdlLnBhcnNlSlNGQ0xKUyhidXR0b25PbmNsaWNrKTtcbiAgICAgICAgY29uc3QgaWQgPSBmb3JtLnBvc3RWYWx1ZXMuaWQ7XG4gICAgICAgIGNvbnN0IHdlYkNvbnRlbnRPcHRpb25zOiBXZWJDb250ZW50RGF0YSA9IHtcbiAgICAgICAgICB0aXRsZSxcbiAgICAgICAgICBkYXRlLFxuICAgICAgICAgIGZvcm0sXG4gICAgICAgICAgaWQsXG4gICAgICAgICAgaW5zdGFuY2VJbmRlbnRpZmllcjogaWRcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZXNvdXJjZXMud2ViQ29udGVudHMudXBzZXJ0KHdlYkNvbnRlbnRPcHRpb25zKTtcbiAgICAgICAgdXNlZFdlYkNvbnRlbnRzSWRzLnB1c2goaWQpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlc291cmNlcy53ZWJDb250ZW50cy5rZWVwT25seSh1c2VkV2ViQ29udGVudHNJZHMpO1xuICAgIHJldHVybiB0aGlzLnJlc291cmNlcy53ZWJDb250ZW50cy5pbnN0YW5jZXM7XG4gIH1cblxuICAvKipcbiAgICogQGluaGVyaXRkb2NcbiAgICovXG4gIGFzeW5jIGdldFN1cnZleXMoKTogUHJvbWlzZTxTaWdhYVN1cnZleVtdPiB7XG4gICAgLy8gVE9ET1xuICAgIHRocm93IG5ldyBFcnJvcignU0lHQUE6IGdldFN1cnZleXMgbm90IGltcGxlbWVudGVkLicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0ZG9jXG4gICAqL1xuICBhc3luYyBnZXRIb21ld29ya3MoKTogUHJvbWlzZTxIb21ld29ya1tdPiB7XG4gICAgY29uc3QgcGFnZSA9IGF3YWl0IHRoaXMuZ2V0Q291cnNlU3ViTWVudSgnVGFyZWZhcycpO1xuICAgIGNvbnN0IHRhYmxlcyA9IHBhZ2UuJCgnLmxpc3RpbmcnKS50b0FycmF5KCk7XG4gICAgaWYgKCF0YWJsZXMpIHJldHVybiBbXTtcbiAgICBjb25zdCB1c2VkSG9tZXdvcmtzSWRzID0gW107XG4gICAgZm9yIChjb25zdCB0YWJsZSBvZiB0YWJsZXMpIHtcbiAgICAgIC8vSWYgdGFibGUgdGl0bGUgaXMgJ1RhcmVmYXMgRW0gR3J1cG8nXG4gICAgICBjb25zdCBpc0dyb3VwSG9tZXdvcmsgPVxuICAgICAgICB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChwYWdlLiQodGFibGUpLnNpYmxpbmdzKCdsZWdlbmQnKS5odG1sKCkpID09PVxuICAgICAgICAnVGFyZWZhcyBFbSBHcnVwbyc7XG5cbiAgICAgIGNvbnN0IHJvd3MgPSBwYWdlLiQodGFibGUpLmZpbmQoJ3RyW2NsYXNzXScpLnRvQXJyYXkoKTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gcGFnZS4kKHJvd3NbaV0pLmZpbmQoJ3RkJyk7XG4gICAgICAgIGNvbnN0IGNlbGxEZXNjcmlwdGlvbiA9IHBhZ2UuJChyb3dzW2kgKyAxXSkuZmluZCgndGQnKTtcbiAgICAgICAgY29uc3QgdGl0bGUgPSB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChjZWxscy5lcSgxKS5odG1sKCkpO1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMucGFyc2VyLnJlbW92ZVRhZ3NIdG1sKGNlbGxEZXNjcmlwdGlvbi5odG1sKCkpO1xuICAgICAgICBjb25zdCBkYXRlID0gdGhpcy5wYXJzZXIucmVtb3ZlVGFnc0h0bWwoY2VsbHMuZXEoMikuaHRtbCgpKTtcbiAgICAgICAgY29uc3QgZGF0ZXMgPSB0aGlzLnBhcnNlci5wYXJzZURhdGVzKGRhdGUsIDIpO1xuICAgICAgICBjb25zdCBoYXZlR3JhZGUgPVxuICAgICAgICAgIHRoaXMucGFyc2VyLnJlbW92ZVRhZ3NIdG1sKGNlbGxzLmVxKDMpLmh0bWwoKSkgIT09ICdOw6NvJztcblxuICAgICAgICBjb25zdCBidXR0b25TZW5kSG9tZXdvcmtFbGVtZW50ID0gcGFnZS4kKFxuICAgICAgICAgIGNlbGxzLmVxKDUpLmZpbmQoJ2Fbb25jbGlja10nKVxuICAgICAgICApO1xuICAgICAgICBsZXQgZm9ybVNlbmRIb21ld29yaztcbiAgICAgICAgaWYgKGJ1dHRvblNlbmRIb21ld29ya0VsZW1lbnQubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgY29uc3Qgb25DbGljayA9IGJ1dHRvblNlbmRIb21ld29ya0VsZW1lbnQuYXR0cignb25jbGljaycpO1xuICAgICAgICAgIGlmICghb25DbGljaylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgJ1NJR0FBOiBCdXR0b24gc2VuZCBob21ld29yayB3aXRob3V0IG9uY2xpY2sgZXZlbnQuJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICBmb3JtU2VuZEhvbWV3b3JrID0gcGFnZS5wYXJzZUpTRkNMSlMob25DbGljayk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYnV0dG9uVmlld0hvbWV3b3JrU3VibWl0dGVkRWxlbWVudCA9IHBhZ2UuJChcbiAgICAgICAgICBjZWxscy5lcSg2KS5maW5kKCdhW29uY2xpY2tdJylcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IGZvcm1WaWV3SG9tZXdvcmtTdWJtaXR0ZWQ7XG4gICAgICAgIGlmIChidXR0b25WaWV3SG9tZXdvcmtTdWJtaXR0ZWRFbGVtZW50Lmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgIGNvbnN0IG9uQ2xpY2sgPSBidXR0b25WaWV3SG9tZXdvcmtTdWJtaXR0ZWRFbGVtZW50LmF0dHIoJ29uY2xpY2snKTtcbiAgICAgICAgICBpZiAoIW9uQ2xpY2spXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICdTSUdBQTogQnV0dG9uIHZpZXcgaG9tZXdvcmsgd2l0aG91dCBvbmNsaWNrIGV2ZW50LidcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgZm9ybVZpZXdIb21ld29ya1N1Ym1pdHRlZCA9IHBhZ2UucGFyc2VKU0ZDTEpTKG9uQ2xpY2spO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZvcm0gPSBmb3JtU2VuZEhvbWV3b3JrIHx8IGZvcm1WaWV3SG9tZXdvcmtTdWJtaXR0ZWQ7XG4gICAgICAgIGxldCBpZDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICBsZXQgaW5zdGFuY2VJbmRlbnRpZmllcjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAoIWZvcm0pIHtcbiAgICAgICAgICBpZiAoIXRoaXMucmVzb3VyY2VzLmxlc3NvbnMuaW5zdGFuY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRMZXNzb25zKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgaG9tZXdvcmtMaXN0ID0gdGhpcy5yZXNvdXJjZXMuaG9tZXdvcmsuaW5zdGFuY2VzLmZpbHRlcihcbiAgICAgICAgICAgIChob21ld29yaykgPT4gaG9tZXdvcmsudGl0bGUgPT09IHRpdGxlXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmIChob21ld29ya0xpc3QubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAnU0lHQUE6IFRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgaG9tZXdvcmsgd2l0aCBzYW1lIHRpdGxlIGFuZCB3aXRob3V0IGlkLidcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIGlmIChob21ld29ya0xpc3QubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGlkID0gaG9tZXdvcmtMaXN0WzBdLl9pbnN0YW5jZUluZGVudGlmaWVyO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnN0YW5jZUluZGVudGlmaWVyID0gJ18nICsgdGl0bGU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlkID0gZm9ybS5wb3N0VmFsdWVzLmlkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpZCkge1xuICAgICAgICAgIGluc3RhbmNlSW5kZW50aWZpZXIgPSBpZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5zdGFuY2VJbmRlbnRpZmllcikge1xuICAgICAgICAgIGNvbnN0IGhvbWV3b3JrT3B0aW9uczogSG9tZXdvcmtEYXRhID0ge1xuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBzdGFydERhdGU6IGRhdGVzWzBdLFxuICAgICAgICAgICAgZW5kRGF0ZTogZGF0ZXNbMV0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGlzR3JvdXBIb21ld29yayxcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgaW5zdGFuY2VJbmRlbnRpZmllcixcbiAgICAgICAgICAgIGZvcm1TZW5kSG9tZXdvcmssXG4gICAgICAgICAgICBmb3JtVmlld0hvbWV3b3JrU3VibWl0dGVkLFxuICAgICAgICAgICAgaGF2ZUdyYWRlXG4gICAgICAgICAgfTtcbiAgICAgICAgICB0aGlzLnJlc291cmNlcy5ob21ld29yay51cHNlcnQoaG9tZXdvcmtPcHRpb25zKTtcbiAgICAgICAgICB1c2VkSG9tZXdvcmtzSWRzLnB1c2goaW5zdGFuY2VJbmRlbnRpZmllcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZXNvdXJjZXMuaG9tZXdvcmsua2VlcE9ubHkodXNlZEhvbWV3b3Jrc0lkcyk7XG5cbiAgICByZXR1cm4gdGhpcy5yZXNvdXJjZXMuaG9tZXdvcmsuaW5zdGFuY2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbmhlcml0ZG9jXG4gICAqL1xuICBhc3luYyBnZXRNZW1iZXJzKCk6IFByb21pc2U8TWVtYmVyTGlzdD4ge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzLmdldENvdXJzZVN1Yk1lbnUoJ1BhcnRpY2lwYW50ZXMnKTtcblxuICAgIGNvbnN0IHRhYmxlcyA9IHBhZ2UuJCgndGFibGUucGFydGljaXBhbnRlcycpLnRvQXJyYXkoKTtcbiAgICBjb25zdCB0YWJsZXNOYW1lcyA9IHBhZ2UuJCgnZmllbGRzZXQnKS50b0FycmF5KCk7XG4gICAgaWYgKHRhYmxlcy5sZW5ndGggIT09IHRhYmxlc05hbWVzLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTSUdBQTogVW5leHBlY3RlZCBwYWdlIG1lbWJlcnMgZm9ybWF0LicpO1xuICAgIH1cbiAgICBsZXQgdGFibGVUZWFjaGVyO1xuICAgIGxldCB0YWJsZVN0dWRlbnQ7XG4gICAgdGFibGVzTmFtZXMuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBsYWJlbCA9IHRoaXMucGFyc2VyLnJlbW92ZVRhZ3NIdG1sKHBhZ2UuJCh2YWx1ZSkuaHRtbCgpKTtcbiAgICAgIGlmIChsYWJlbC5pbmNsdWRlcygnUHJvZmVzc29yZXMnKSkgdGFibGVUZWFjaGVyID0gdGFibGVzW2luZGV4XTtcbiAgICAgIGVsc2UgaWYgKGxhYmVsLmluY2x1ZGVzKCdBbHVub3MnKSkgdGFibGVTdHVkZW50ID0gdGFibGVzW2luZGV4XTtcbiAgICB9KTtcbiAgICBjb25zdCB0ZWFjaGVyczogVGVhY2hlcltdID0gW107XG4gICAgaWYgKHRhYmxlVGVhY2hlcikge1xuICAgICAgY29uc3QgdGVhY2hlckVsZW1lbnRzID0gcGFnZS4kKHRhYmxlVGVhY2hlcikuZmluZCgndHInKS50b0FycmF5KCk7XG4gICAgICBmb3IgKGNvbnN0IHRlYWNoZXJFbGVtZW50IG9mIHRlYWNoZXJFbGVtZW50cykge1xuICAgICAgICBsZXQgZGVwYXJ0bWVudDtcbiAgICAgICAgbGV0IGZvcm1hdGlvbjtcbiAgICAgICAgbGV0IHVzZXJuYW1lO1xuICAgICAgICBsZXQgZW1haWw7XG4gICAgICAgIGNvbnN0IGluZm9ybWF0aW9uc1N0cmluZyA9XG4gICAgICAgICAgcGFnZS4kKHRlYWNoZXJFbGVtZW50KS5maW5kKCd0ZFt2YWxpZ25dJykuaHRtbCgpIHx8ICcnO1xuICAgICAgICBjb25zdCBpbmZvcm1hdGlvbnMgPSBpbmZvcm1hdGlvbnNTdHJpbmcuc3BsaXQoJzxicj4nKS5zbGljZSgxLCAtMSk7XG4gICAgICAgIGZvciAoY29uc3QgaW5mb3JtYXRpb24gb2YgaW5mb3JtYXRpb25zKSB7XG4gICAgICAgICAgY29uc3QgbGFiZWwgPSB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChcbiAgICAgICAgICAgIChpbmZvcm1hdGlvbi5tYXRjaCgvXltcXHNcXFNdKj8oPz06W1xcc10qPzxlbT4pL2cpIHx8IFtdKVswXVxuICAgICAgICAgICk7XG4gICAgICAgICAgY29uc3QgaW5mb3JtYXRpb25Db250ZW50ID0gdGhpcy5wYXJzZXIucmVtb3ZlVGFnc0h0bWwoXG4gICAgICAgICAgICAoaW5mb3JtYXRpb24ubWF0Y2goLyg/PTxlbT4pW1xcc1xcU10qPyg/PTxcXC9lbT4pL2cpIHx8IFtdKVswXVxuICAgICAgICAgICk7XG4gICAgICAgICAgc3dpdGNoIChsYWJlbCkge1xuICAgICAgICAgICAgY2FzZSAnRGVwYXJ0YW1lbnRvJzpcbiAgICAgICAgICAgICAgZGVwYXJ0bWVudCA9IGluZm9ybWF0aW9uQ29udGVudDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdGb3JtYcOnw6NvJzpcbiAgICAgICAgICAgICAgZm9ybWF0aW9uID0gaW5mb3JtYXRpb25Db250ZW50O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ1VzdcOhcmlvJzpcbiAgICAgICAgICAgICAgdXNlcm5hbWUgPSBpbmZvcm1hdGlvbkNvbnRlbnQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnRS1tYWlsJzpcbiAgICAgICAgICAgIGNhc2UgJ0UtTWFpbCc6XG4gICAgICAgICAgICAgIGVtYWlsID0gaW5mb3JtYXRpb25Db250ZW50O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICdXQVJOSU5HOlRlYWNoZXIgaW5mb3JtYXRpb24gbGFiZWwgbm90IHJlY29nbml6ZWQ6JyArIGxhYmVsXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChcbiAgICAgICAgICBwYWdlLiQodGVhY2hlckVsZW1lbnQpLmZpbmQoJ3N0cm9uZyA+IGEnKS5odG1sKClcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCF1c2VybmFtZSB8fCAhZW1haWwpXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTSUdBQTogSW52YWxpZCB0ZWFjaGVyIGZvcm1hdCBhdCBtZW1iZXIgcGFnZS4nKTtcbiAgICAgICAgY29uc3QgdGVhY2hlcjogVGVhY2hlciA9IHtcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHVzZXJuYW1lLFxuICAgICAgICAgIGRlcGFydG1lbnQsXG4gICAgICAgICAgZm9ybWF0aW9uLFxuICAgICAgICAgIGVtYWlsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHBob3RvSFJFRiA9IHBhZ2UuJCh0ZWFjaGVyRWxlbWVudCkuZmluZCgnaW1nJykuYXR0cignc3JjJyk7XG4gICAgICAgIGlmICghcGhvdG9IUkVGKVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICdTSUdBQTogdGVhY2hlciBwcm9maWxlIHBpY3R1cmUgd2l0aG91dCBzcmMgYXQgbWVtYmVyIHBhZ2UuJ1xuICAgICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcGhvdG9VUkwgPSBuZXcgVVJMKHBob3RvSFJFRiwgcGFnZS51cmwuaHJlZik7XG4gICAgICAgIGlmICghcGhvdG9VUkwuaHJlZi5pbmNsdWRlcygnbm9fcGljdHVyZS5wbmcnKSkge1xuICAgICAgICAgIHRlYWNoZXIucGhvdG9VUkwgPSBwaG90b1VSTDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRlYWNoZXJzLnB1c2godGVhY2hlcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc3R1ZGVudHM6IFN0dWRlbnRbXSA9IFtdO1xuICAgIGlmICh0YWJsZVN0dWRlbnQpIHtcbiAgICAgIGNvbnN0IHJvd3MgPSBwYWdlLiQodGFibGVTdHVkZW50KS5maW5kKCd0cicpLnRvQXJyYXkoKTtcbiAgICAgIGZvciAoY29uc3Qgcm93IG9mIHJvd3MpIHtcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZDb2x1bW4gPSBwYWdlLiQocm93KS5maW5kKCd0ZFt2YWxpZ25dJykubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBjb2x1bW4gPSAwOyBjb2x1bW4gPCBudW1iZXJPZkNvbHVtbjsgY29sdW1uKyspIHtcbiAgICAgICAgICBjb25zdCBpbmZvcm1hdGlvbnNTdHJpbmcgPVxuICAgICAgICAgICAgcGFnZS4kKHJvdykuZmluZCgndGRbdmFsaWduXScpLmVxKGNvbHVtbikuaHRtbCgpIHx8ICcnO1xuICAgICAgICAgIGNvbnN0IGluZm9ybWF0aW9ucyA9IGluZm9ybWF0aW9uc1N0cmluZy5zcGxpdCgnPGJyPicpLnNsaWNlKDEpO1xuICAgICAgICAgIGxldCByZWdpc3RyYXRpb247XG4gICAgICAgICAgbGV0IHVzZXJuYW1lO1xuICAgICAgICAgIGxldCBwcm9ncmFtO1xuICAgICAgICAgIGxldCByZWdpc3RyYXRpb25EYXRlO1xuICAgICAgICAgIGxldCBlbWFpbDtcbiAgICAgICAgICBmb3IgKGNvbnN0IGluZm9ybWF0aW9uIG9mIGluZm9ybWF0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChcbiAgICAgICAgICAgICAgKGluZm9ybWF0aW9uLm1hdGNoKC9eW1xcc1xcU10qPyg/PTpbXFxzXSo/PGVtPikvZykgfHwgW10pWzBdXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgaW5mb3JtYXRpb25Db250ZW50ID0gdGhpcy5wYXJzZXIucmVtb3ZlVGFnc0h0bWwoXG4gICAgICAgICAgICAgIChpbmZvcm1hdGlvbi5tYXRjaCgvKD89PGVtPilbXFxzXFxTXSo/KD89PFxcL2VtPikvZykgfHwgW10pWzBdXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgc3dpdGNoIChsYWJlbCkge1xuICAgICAgICAgICAgICBjYXNlICdNYXRyw61jdWxhJzoge1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbiA9IGluZm9ybWF0aW9uQ29udGVudDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlICdVc3XDoXJpbyc6IHtcbiAgICAgICAgICAgICAgICB1c2VybmFtZSA9IGluZm9ybWF0aW9uQ29udGVudDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlICdDdXJzbyc6IHtcbiAgICAgICAgICAgICAgICBwcm9ncmFtID0gaW5mb3JtYXRpb25Db250ZW50O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNhc2UgJ0RhdGEgTWF0csOtY3VsYSc6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmZvcm1hdGlvbkRhdGVTcGxpdGVkID0gaW5mb3JtYXRpb25Db250ZW50LnNwbGl0KCctJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgeWVhciA9IHBhcnNlSW50KGluZm9ybWF0aW9uRGF0ZVNwbGl0ZWRbMl0sIDEwKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtb250aCA9IHBhcnNlSW50KGluZm9ybWF0aW9uRGF0ZVNwbGl0ZWRbMV0sIDEwKSAtIDE7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF5ID0gcGFyc2VJbnQoaW5mb3JtYXRpb25EYXRlU3BsaXRlZFswXSwgMTApO1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJhdGlvbkRhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjYXNlICdFLW1haWwnOlxuICAgICAgICAgICAgICBjYXNlICdFLU1haWwnOiB7XG4gICAgICAgICAgICAgICAgZW1haWwgPSBpbmZvcm1hdGlvbkNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgICAgICAgJ1dBUk5JTkc6U3R1ZGVudCBpbmZvcm1hdGlvbiBsYWJlbCBub3QgcmVjb2duaXplZDonICsgbGFiZWxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXVzZXJuYW1lIHx8XG4gICAgICAgICAgICAhZW1haWwgfHxcbiAgICAgICAgICAgICFyZWdpc3RyYXRpb25EYXRlIHx8XG4gICAgICAgICAgICAhcmVnaXN0cmF0aW9uIHx8XG4gICAgICAgICAgICAhcHJvZ3JhbVxuICAgICAgICAgIClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU0lHQUE6IEludmFsaWQgc3R1ZGVudCBmb3JtYXQgYXQgbWVtYmVyIHBhZ2UuJyk7XG5cbiAgICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5wYXJzZXIucmVtb3ZlVGFnc0h0bWwoXG4gICAgICAgICAgICBwYWdlLiQocm93KS5maW5kKCdzdHJvbmcnKS5lcShjb2x1bW4pLmh0bWwoKVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBjb25zdCBzdHVkZW50OiBTdHVkZW50ID0ge1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHVzZXJuYW1lLFxuICAgICAgICAgICAgcHJvZ3JhbSxcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvbixcbiAgICAgICAgICAgIHJlZ2lzdHJhdGlvbkRhdGUsXG4gICAgICAgICAgICBlbWFpbFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjb25zdCBwaG90b0hSRUYgPSBwYWdlXG4gICAgICAgICAgICAuJChyb3cpXG4gICAgICAgICAgICAuZmluZCgndGRbd2lkdGg9XCI0N1wiXSBpbWcnKVxuICAgICAgICAgICAgLmVxKGNvbHVtbilcbiAgICAgICAgICAgIC5hdHRyKCdzcmMnKTtcbiAgICAgICAgICBpZiAoIXBob3RvSFJFRilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgJ1NJR0FBOiBzdHVkZW50IHByb2ZpbGUgcGljdHVyZSB3aXRob3V0IHNyYyBhdCBtZW1iZXIgcGFnZS4nXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgcGhvdG9VUkwgPSBuZXcgVVJMKHBob3RvSFJFRiwgcGFnZS51cmwuaHJlZik7XG4gICAgICAgICAgaWYgKCFwaG90b1VSTC5ocmVmLmluY2x1ZGVzKCdub19waWN0dXJlLnBuZycpKSB7XG4gICAgICAgICAgICBzdHVkZW50LnBob3RvVVJMID0gcGhvdG9VUkw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc3R1ZGVudHMucHVzaChzdHVkZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0ZWFjaGVycyxcbiAgICAgIHN0dWRlbnRzXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdGRvY1xuICAgKi9cbiAgYXN5bmMgZ2V0R3JhZGVzKHJldHJ5ID0gdHJ1ZSk6IFByb21pc2U8R3JhZGVHcm91cFtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzLmdldENvdXJzZVN1Yk1lbnUoJ1ZlciBOb3RhcycsIHJldHJ5KTtcbiAgICAgIGNvbnN0IGdldFBvc2l0aW9uQnlDZWxsQ29sU3BhbiA9IChcbiAgICAgICAgdGhzOiBjaGVlcmlvLkNoZWVyaW8sXG4gICAgICAgIGNlbGw6IGNoZWVyaW8uRWxlbWVudFxuICAgICAgKSA9PiB7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZm9yIChjb25zdCB0ciBvZiB0aHMudG9BcnJheSgpKSB7XG4gICAgICAgICAgaWYgKGNlbGwgPT09IHRyKSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaSArPSBwYXJzZUludChwYWdlLiQodHIpLmF0dHIoJ2NvbHNwYW4nKSB8fCAnMScsIDEwKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NJR0FBOiBJbnZhbGlkIGdyYWRlIHRhYmxlLicpO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVtb3ZlQ2VsbHNXaXRoTmFtZSA9IFsnJywgJ01hdHLDrWN1bGEnLCAnTm9tZScsICdTaXQuJywgJ0ZhbHRhcyddO1xuXG4gICAgICBjb25zdCB0YWJsZSA9IHBhZ2UuJCgndGFibGUudGFiZWxhUmVsYXRvcmlvJyk7XG4gICAgICBpZiAodGFibGUubGVuZ3RoIDwgMSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTSUdBQTogUmVjZWl2ZWQgZW1wdHkgdGFibGUgb24gZ3JhZGUgcGFnZS4nKTtcblxuICAgICAgY29uc3QgdGhlYWRUcnMgPSBwYWdlLiQoJ3RoZWFkIHRyJykudG9BcnJheSgpO1xuICAgICAgY29uc3QgdmFsdWVDZWxscyA9IHBhZ2UuJCh0YWJsZSkuZmluZCgndGJvZHkgdHInKS5jaGlsZHJlbigpO1xuICAgICAgaWYgKHZhbHVlQ2VsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU0lHQUE6IFBhZ2UgZ3JhZGVzIHdpdGhvdXQgZ3JhZGVzLicpO1xuICAgICAgfVxuICAgICAgY29uc3QgZ3JhZGVzOiBHcmFkZUdyb3VwW10gPSBbXTtcblxuICAgICAgY29uc3QgdGhlYWRFbGVtZW50czogY2hlZXJpby5DaGVlcmlvW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgdGhlYWRUciBvZiB0aGVhZFRycykge1xuICAgICAgICB0aGVhZEVsZW1lbnRzLnB1c2gocGFnZS4kKHRoZWFkVHIpLmZpbmQoJ3RoJykpO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoZWFkRWxlbWVudHNbMF0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgZ3JhZGVHcm91cE5hbWUgPSB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChcbiAgICAgICAgICB0aGVhZEVsZW1lbnRzWzBdLmVxKGkpLmh0bWwoKVxuICAgICAgICApO1xuICAgICAgICBpZiAocmVtb3ZlQ2VsbHNXaXRoTmFtZS5pbmRleE9mKGdyYWRlR3JvdXBOYW1lKSAhPT0gLTEpIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBpbmRleCA9IGdldFBvc2l0aW9uQnlDZWxsQ29sU3BhbihcbiAgICAgICAgICB0aGVhZEVsZW1lbnRzWzBdLFxuICAgICAgICAgIHRoZWFkRWxlbWVudHNbMF1baV1cbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgdGhlYWRFbGVtZW50Q29sc3BhbiA9IHBhcnNlSW50KFxuICAgICAgICAgIHRoZWFkRWxlbWVudHNbMF0uZXEoaSkuYXR0cignY29sc3BhbicpIHx8ICcxJyxcbiAgICAgICAgICAxMFxuICAgICAgICApO1xuICAgICAgICBsZXQgdHlwZTpcbiAgICAgICAgICB8ICd3ZWlnaHRlZC1hdmVyYWdlJ1xuICAgICAgICAgIHwgJ2FyaXRobWV0aWMtYXZlcmFnZSdcbiAgICAgICAgICB8ICdzdW0tb2YtZ3JhZGVzJ1xuICAgICAgICAgIHwgJ29ubHktYXZlcmFnZSc7XG4gICAgICAgIGNvbnN0IGdyYWRlVHlwZSA9IHBhZ2UuJChgI3RpcG9VbmlkJHtpfWApLnZhbCgpO1xuICAgICAgICBzd2l0Y2ggKGdyYWRlVHlwZSkge1xuICAgICAgICAgIGNhc2UgJ1AnOlxuICAgICAgICAgICAgdHlwZSA9ICd3ZWlnaHRlZC1hdmVyYWdlJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ0EnOlxuICAgICAgICAgICAgdHlwZSA9ICdhcml0aG1ldGljLWF2ZXJhZ2UnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnUyc6XG4gICAgICAgICAgICB0eXBlID0gJ3N1bS1vZi1ncmFkZXMnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHR5cGUgPSAnb25seS1hdmVyYWdlJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSAnb25seS1hdmVyYWdlJyB8fCB0aGVhZEVsZW1lbnRDb2xzcGFuID09IDEpIHtcbiAgICAgICAgICBjb25zdCB2YWx1ZVN0cmluZyA9IHRoaXMucGFyc2VyXG4gICAgICAgICAgICAucmVtb3ZlVGFnc0h0bWwodmFsdWVDZWxscy5lcShpbmRleCkuaHRtbCgpKVxuICAgICAgICAgICAgLnJlcGxhY2UoLywvZywgJy4nKTtcbiAgICAgICAgICBsZXQgdmFsdWU7XG4gICAgICAgICAgaWYgKHZhbHVlU3RyaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZVN0cmluZyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGdyYWRlcy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IGdyYWRlR3JvdXBOYW1lLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB0eXBlOiAnb25seS1hdmVyYWdlJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGdyYWRlc1N1bU9mR3JhZGVzOiBTdWJHcmFkZVN1bU9mR3JhZGVzW10gPSBbXTtcbiAgICAgICAgICBjb25zdCBncmFkZXNXZWlnaHRlZDogU3ViR3JhZGVXZWlnaHRlZEF2ZXJhZ2VbXSA9IFtdO1xuICAgICAgICAgIGNvbnN0IGdyYWRlc0FyaXRobWV0aWM6IFN1YkdyYWRlQXJpdGhtZXRpY0F2ZXJhZ2VbXSA9IFtdO1xuXG4gICAgICAgICAgZm9yIChsZXQgaiA9IGluZGV4OyBqIDwgaW5kZXggKyB0aGVhZEVsZW1lbnRDb2xzcGFuOyBqKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxJZCA9IHRoZWFkRWxlbWVudHNbMV0uZXEoaikuYXR0cignaWQnKTtcbiAgICAgICAgICAgIGlmICghZnVsbElkKSB0aHJvdyBuZXcgRXJyb3IoJ1NJR0FBOiBHcmFkZSB3aXRob3V0IGlkLicpO1xuICAgICAgICAgICAgY29uc3QgZ3JhZGVJZCA9IGZ1bGxJZC5zbGljZSg1KTtcblxuICAgICAgICAgICAgaWYgKGdyYWRlSWQgIT09ICcnKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGdyYWRlTmFtZSA9IHBhZ2UuJChgaW5wdXQjZGVuQXZhbF8ke2dyYWRlSWR9YCkudmFsKCk7XG4gICAgICAgICAgICAgIGNvbnN0IGdyYWRlQ29kZSA9IHBhZ2UuJChgaW5wdXQjYWJyZXZBdmFsXyR7Z3JhZGVJZH1gKS52YWwoKTtcblxuICAgICAgICAgICAgICBsZXQgdmFsdWU6IG51bWJlciB8IHVuZGVmaW5lZCA9IHBhcnNlRmxvYXQoXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZXJcbiAgICAgICAgICAgICAgICAgIC5yZW1vdmVUYWdzSHRtbCh2YWx1ZUNlbGxzLmVxKGopLmh0bWwoKSlcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8sL2csICcuJylcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgaWYgKCF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgdmFsdWUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdzdW0tb2YtZ3JhZGVzJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1heFZhbHVlID0gcGFyc2VGbG9hdChcbiAgICAgICAgICAgICAgICAgIHBhZ2UuJChgaW5wdXQjbm90YUF2YWxfJHtncmFkZUlkfWApLnZhbCgpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBncmFkZXNTdW1PZkdyYWRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGdyYWRlTmFtZSxcbiAgICAgICAgICAgICAgICAgIGNvZGU6IGdyYWRlQ29kZSxcbiAgICAgICAgICAgICAgICAgIG1heFZhbHVlOiBtYXhWYWx1ZSxcbiAgICAgICAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3dlaWdodGVkLWF2ZXJhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3JhZGVXZWlnaHQgPSBwYXJzZUZsb2F0KFxuICAgICAgICAgICAgICAgICAgcGFnZS4kKGBpbnB1dCNwZXNvQXZhbF8ke2dyYWRlSWR9YCkudmFsKClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGdyYWRlc1dlaWdodGVkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgbmFtZTogZ3JhZGVOYW1lLFxuICAgICAgICAgICAgICAgICAgY29kZTogZ3JhZGVDb2RlLFxuICAgICAgICAgICAgICAgICAgd2VpZ2h0OiBncmFkZVdlaWdodCxcbiAgICAgICAgICAgICAgICAgIHZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2FyaXRobWV0aWMtYXZlcmFnZScpIHtcbiAgICAgICAgICAgICAgICBncmFkZXNBcml0aG1ldGljLnB1c2goe1xuICAgICAgICAgICAgICAgICAgbmFtZTogZ3JhZGVOYW1lLFxuICAgICAgICAgICAgICAgICAgY29kZTogZ3JhZGVDb2RlLFxuICAgICAgICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbGV0IGF2ZXJhZ2U6IG51bWJlciB8IHVuZGVmaW5lZCA9IHBhcnNlRmxvYXQoXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZXJcbiAgICAgICAgICAgICAgICAgIC5yZW1vdmVUYWdzSHRtbCh2YWx1ZUNlbGxzLmVxKGopLmh0bWwoKSlcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8sL2csICcuJylcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKGF2ZXJhZ2UpKSBhdmVyYWdlID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBncmFkZXNTdW1PZkdyYWRlcy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgZ3JhZGVzV2VpZ2h0ZWQubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgIGdyYWRlc0FyaXRobWV0aWMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NJR0FBOiBJbnZhbGlkIGdyYWRlIHR5cGUuJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdzdW0tb2YtZ3JhZGVzJykge1xuICAgICAgICAgICAgICAgIGdyYWRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGdyYWRlR3JvdXBOYW1lLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IGF2ZXJhZ2UsXG4gICAgICAgICAgICAgICAgICBncmFkZXM6IGdyYWRlc1N1bU9mR3JhZGVzLFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1bS1vZi1ncmFkZXMnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3dlaWdodGVkLWF2ZXJhZ2UnKSB7XG4gICAgICAgICAgICAgICAgZ3JhZGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgbmFtZTogZ3JhZGVHcm91cE5hbWUsXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogYXZlcmFnZSxcbiAgICAgICAgICAgICAgICAgIGdyYWRlczogZ3JhZGVzV2VpZ2h0ZWQsXG4gICAgICAgICAgICAgICAgICB0eXBlOiAnd2VpZ2h0ZWQtYXZlcmFnZSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnYXJpdGhtZXRpYy1hdmVyYWdlJykge1xuICAgICAgICAgICAgICAgIGdyYWRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGdyYWRlR3JvdXBOYW1lLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IGF2ZXJhZ2UsXG4gICAgICAgICAgICAgICAgICBncmFkZXM6IGdyYWRlc0FyaXRobWV0aWMsXG4gICAgICAgICAgICAgICAgICB0eXBlOiAnYXJpdGhtZXRpYy1hdmVyYWdlJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZ3JhZGVzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAocmV0cnkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0R3JhZGVzKGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaW5oZXJpdGRvY1xuICAgKi9cbiAgYXN5bmMgZ2V0U3lsbGFidXMoKTogUHJvbWlzZTxTeWxsYWJ1cz4ge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzLmdldENvdXJzZVN1Yk1lbnUoJ1BsYW5vIGRlIEVuc2lubycpO1xuICAgIGNvbnN0IHRhYmxlcyA9IHBhZ2UuJCgndGFibGUubGlzdGFnZW0nKS50b0FycmF5KCk7XG5cbiAgICBjb25zdCByZXNwb25zZTogU3lsbGFidXMgPSB7XG4gICAgICBzY2hlZHVsZTogW10sXG4gICAgICBldmFsdWF0aW9uczogW10sXG4gICAgICBiYXNpY1JlZmVyZW5jZXM6IFtdLFxuICAgICAgc3VwcGxlbWVudGFyeVJlZmVyZW5jZXM6IFtdXG4gICAgfTtcbiAgICBmb3IgKGNvbnN0IHRhYmxlIG9mIHRhYmxlcykge1xuICAgICAgY29uc3QgdGl0bGVFbGVtZW50ID0gcGFnZS4kKHRhYmxlKS5maW5kKCdjYXB0aW9uJyk7XG4gICAgICBjb25zdCB0aXRsZSA9IHRoaXMucGFyc2VyLnJlbW92ZVRhZ3NIdG1sKHRpdGxlRWxlbWVudC5odG1sKCkpO1xuXG4gICAgICBjb25zdCByb3dzID0gcGFnZS4kKHRhYmxlKS5jaGlsZHJlbigndGJvZHknKS5jaGlsZHJlbigndHInKS50b0FycmF5KCk7XG4gICAgICBzd2l0Y2ggKHRpdGxlKSB7XG4gICAgICAgIGNhc2UgJ01ldG9kb2xvZ2lhIGRlIEVuc2lubyBlIEF2YWxpYcOnw6NvJzoge1xuICAgICAgICAgIGZvciAoY29uc3Qgcm93IG9mIHJvd3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvd0JvZHlFbGVtZW50ID0gcGFnZS4kKHJvdykuY2hpbGRyZW4oJ3RkJyk7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0gdGhpcy5wYXJzZXIucmVtb3ZlVGFnc0h0bWxLZWVwaW5nRW1waGFzaXMoXG4gICAgICAgICAgICAgIHJvd0JvZHlFbGVtZW50Lmh0bWwoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHJvd0ZpZWxkRWxlbWVudCA9IHBhZ2UuJChyb3cpLmNoaWxkcmVuKCd0aCcpO1xuXG4gICAgICAgICAgICBjb25zdCByb3dGaWVsZCA9IHRoaXMucGFyc2VyLnJlbW92ZVRhZ3NIdG1sKHJvd0ZpZWxkRWxlbWVudC5odG1sKCkpO1xuICAgICAgICAgICAgaWYgKHJvd0ZpZWxkID09PSAnTWV0b2RvbG9naWE6Jykge1xuICAgICAgICAgICAgICByZXNwb25zZS5tZXRob2RzID0gYm9keTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIHJvd0ZpZWxkID09PSAnUHJvY2VkaW1lbnRvcyBkZSBBdmFsaWHDp8OjbyBkYSBBcHJlbmRpemFnZW06J1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHJlc3BvbnNlLmFzc2Vzc21lbnRQcm9jZWR1cmVzID0gYm9keTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocm93RmllbGQgPT09ICdIb3LDoXJpbyBkZSBhdGVuZGltZW50bzonKSB7XG4gICAgICAgICAgICAgIHJlc3BvbnNlLmF0dGVuZGFuY2VTY2hlZHVsZSA9IGJvZHk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NJR0FBOiBMYWJlbCBub3QgZm91bmQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ0Nyb25vZ3JhbWEgZGUgQXVsYXMnOiB7XG4gICAgICAgICAgY29uc3Qgc2NoZWR1bGUgPSBbXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiByb3dzKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydERhdGVFbGVtZW50ID0gcGFnZS4kKHJvdykuY2hpbGRyZW4oJ3RkJykuZXEoMCk7XG4gICAgICAgICAgICBjb25zdCBlbmREYXRlRWxlbWVudCA9IHBhZ2UuJChyb3cpLmNoaWxkcmVuKCd0ZCcpLmVxKDEpO1xuICAgICAgICAgICAgY29uc3QgYm9keUVsZW1lbnQgPSBwYWdlLiQocm93KS5jaGlsZHJlbigndGQnKS5lcSgyKTtcblxuICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlU3RyaW5nID0gdGhpcy5wYXJzZXIucmVtb3ZlVGFnc0h0bWwoXG4gICAgICAgICAgICAgIHN0YXJ0RGF0ZUVsZW1lbnQuaHRtbCgpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsZXQgc3RhcnREYXRlO1xuICAgICAgICAgICAgaWYgKHN0YXJ0RGF0ZVN0cmluZykge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVzID0gdGhpcy5wYXJzZXIucGFyc2VEYXRlcyhzdGFydERhdGVTdHJpbmcsIDEpO1xuICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZSA9IGRhdGVzWzBdO1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHt9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGVuZERhdGVTdHJpbmcgPSB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChcbiAgICAgICAgICAgICAgZW5kRGF0ZUVsZW1lbnQuaHRtbCgpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsZXQgZW5kRGF0ZTtcbiAgICAgICAgICAgIGlmIChlbmREYXRlU3RyaW5nKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZXMgPSB0aGlzLnBhcnNlci5wYXJzZURhdGVzKGVuZERhdGVTdHJpbmcsIDEpO1xuICAgICAgICAgICAgICAgIGVuZERhdGUgPSBkYXRlc1swXTtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7fVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMucGFyc2VyLnJlbW92ZVRhZ3NIdG1sKGJvZHlFbGVtZW50Lmh0bWwoKSk7XG5cbiAgICAgICAgICAgIHNjaGVkdWxlLnB1c2goe1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgc3RhcnREYXRlLFxuICAgICAgICAgICAgICBlbmREYXRlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzcG9uc2Uuc2NoZWR1bGUgPSBzY2hlZHVsZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdBdmFsaWHDp8O1ZXMnOiB7XG4gICAgICAgICAgY29uc3QgZXZhbHVhdGlvbnM6IEV4YW1bXSA9IFtdO1xuICAgICAgICAgIGZvciAoY29uc3Qgcm93IG9mIHJvd3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGVFbGVtZW50ID0gcGFnZS4kKHJvdykuY2hpbGRyZW4oJ3RkJykuZXEoMCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uRWxlbWVudCA9IHBhZ2UuJChyb3cpLmNoaWxkcmVuKCd0ZCcpLmVxKDEpO1xuICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IHRoaXMucGFyc2VyLnJlbW92ZVRhZ3NIdG1sKGRhdGVFbGVtZW50Lmh0bWwoKSk7XG4gICAgICAgICAgICBsZXQgZGF0ZTtcbiAgICAgICAgICAgIGlmIChkYXRlU3RyaW5nKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZXMgPSB0aGlzLnBhcnNlci5wYXJzZURhdGVzKGRhdGVTdHJpbmcsIDEpO1xuICAgICAgICAgICAgICAgIGRhdGUgPSBkYXRlc1swXTtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7fVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvblRleHQgPSB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb25FbGVtZW50Lmh0bWwoKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZXZhbHVhdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvblRleHQsXG4gICAgICAgICAgICAgIGRhdGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXNwb25zZS5ldmFsdWF0aW9ucyA9IGV2YWx1YXRpb25zO1xuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnUmVmZXLDqm5jaWFzIELDoXNpY2FzJzpcbiAgICAgICAgY2FzZSAnUmVmZXLDqm5jaWFzIENvbXBsZW1lbnRhcmVzJzoge1xuICAgICAgICAgIGNvbnN0IHJlZmVyZW5jZXMgPSBbXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiByb3dzKSB7XG4gICAgICAgICAgICBjb25zdCByZWZlcmVuY2VUeXBlRWxlbWVudCA9IHBhZ2UuJChyb3cpLmZpbmQoJ3RkJykuZXEoMCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlZmVyZW5jZVR5cGUgPSB0aGlzLnBhcnNlci5yZW1vdmVUYWdzSHRtbChcbiAgICAgICAgICAgICAgcmVmZXJlbmNlVHlwZUVsZW1lbnQuaHRtbCgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb25FbGVtZW50ID0gcGFnZS4kKHJvdykuY2hpbGRyZW4oJ3RkJykuZXEoMSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uVGV4dCA9IHRoaXMucGFyc2VyLnJlbW92ZVRhZ3NIdG1sS2VlcGluZ0VtcGhhc2lzKFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbkVsZW1lbnQuaHRtbCgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmVmZXJlbmNlcy5wdXNoKHtcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uVGV4dCxcbiAgICAgICAgICAgICAgdHlwZTogcmVmZXJlbmNlVHlwZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aXRsZSA9PT0gJ1JlZmVyw6puY2lhcyBCw6FzaWNhcycpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLmJhc2ljUmVmZXJlbmNlcyA9IHJlZmVyZW5jZXM7XG4gICAgICAgICAgfSBlbHNlIGlmICh0aXRsZSA9PT0gJ1JlZmVyw6puY2lhcyBDb21wbGVtZW50YXJlcycpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnN1cHBsZW1lbnRhcnlSZWZlcmVuY2VzID0gcmVmZXJlbmNlcztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgJ1dBUk5JTkc6RWR1Y2F0aW9uIHBsYW4gdGFibGUgdGl0bGUgbm90IHJlY29nbml6ZWQ6JyArIHRpdGxlXG4gICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG59XG4iXX0=